!function(b,F){"use strict";var V="ht",w=b[V],x="px",t="left",e="top",m="bottom",P="right",S="innerHTML",o="className",W="",J="width",j="height",y="string",k="position",Z="absolute",i="0",R="opacity",E="background",Y=w.Default,q=Y.getInternal(),r=w.Color,A=Y.animate,d=Y.isTouchable,I=null,M=(Math.sqrt,b.parseInt),B=b.setTimeout,c=(Math.round,r.titleIconBackground),$=function(v){return typeof v===y||v instanceof String},n=function(){return document},z=function(Z){return n().createElement(Z)},a=function(){var h=z("div");return h.tabIndex=-1,h.style.outline="none",h},f=function(){return z("canvas")},s=function(Q,W){K(Q,"-webkit-transform",W),K(Q,"-ms-transform",W),K(Q,"transform",W)},K=function(A,C,j){A.style.setProperty(C,j,I)},D=function(B,x,s){Y.def(w.widget[B],x,s)},v=function(t,n){t.appendChild(n)},G=function(){return n().documentElement},N=function(){return G().clientWidth},Q=function(){return G().clientHeight},_=q.addEventListener,l=q.removeEventListener,T=function(j){var w=j.touches[0];return w?w:j.changedTouches[0]};q.addMethod(Y,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:c},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:c}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:c},{type:"rect",rect:[10,10,80,20],background:c}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:c},{type:"rect",rect:[10,34,56,14],background:c},{type:"rect",rect:[34,10,56,14],background:c},{type:"rect",rect:[82,10,8,56],background:c},{type:"rect",rect:[66,62,24,8],background:c}]},dialogTitleLabelColor:Y.labelSelectColor,dialogTitleLabelFont:(d?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:Y.labelFont,dialogTitleBackground:r.titleBackground,dialogHeaderBackground:r.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var L=function(P){var G=this;G.$1d=P,G.addListeners()};Y.def(L,F,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(y){var C=this,O=C.$1d,j=O.$6d,h=O._config,r=O.$7d,u=y,m=y.target;if(r.contains(m)||Y.preventDefault(y),Y.isLeftButton(y)){d&&(u=T(y));var J=C.$8d={x:u.pageX,y:u.pageY};C.$9d={x:J.x,y:J.y},!h.maximized&&h.draggable&&j.contains(m)&&(C.$4d=!0,Y.startDragging(C,y)),C.handle_mousemove(y)&&(C.$2d=!0,Y.startDragging(C,y)),r.contains(y.target)||O.$41d.focus()}},handle_mousedown:function(o){this.handle_touchstart(o)},handle_touchend:function(D){if(Y.isLeftButton(D)&&!this.$5d&&!this.$3d){var d=this,L=d.$1d,k=D.target,w=L._config,K=L.$18d,l=L.$16d;for(w.closable&&K.contains(k)&&L.hide(),w.maximizable&&l.contains(k)&&(w.maximized?L.restore():L.maximize());k&&(k.className||"").indexOf("dialog-button")<0;)k=k.parentNode;k&&k.buttonItem&&L.action&&L.action(k.buttonItem,D),delete d.$8d,delete d.$9d}},handle_mouseup:function(H){this.handle_touchend(H)},handleWindowTouchEnd:function(G){var t=this,B=t.$1d,n=B.$10d;t.$2d&&t.$3d?n.fire({kind:"endResize",target:B,originEvent:G}):t.$4d&&t.$5d&&n.fire({kind:"endMove",target:B,originEvent:G}),this.clear()},handleWindowMouseUp:function(S){this.handleWindowTouchEnd(S)},handle_mousemove:function(P){var e=this.$1d._config;if(e.maximized)return!1;if("w"!==e.resizeMode&&"h"!==e.resizeMode&&"wh"!==e.resizeMode)return!1;var y=this,z=y.getView(),O=z.querySelector(".resize-area"),i=O.getBoundingClientRect(),B={x:i.left,y:i.top,width:i.width,height:i.height};P=d?T(P):P;var l=P.clientX,x=P.clientY,b={x:l,y:x};return Y.containsPoint(B,b)?(K(z,"cursor","nwse-resize"),!0):(K(z,"cursor",W),void 0)},handleWindowTouchMove:function(q){q.preventDefault();var P=q;d&&(P=T(q));var C=this,$=C.$8d,L=C.$9d;if(!(L.x==$.x&&L.y==$.y&&Y.getDistance(L,{x:P.pageX,y:P.pageY})<=1)){var h=C.$1d,G=h._config,l=h.$21d,U=G.resizeMode||"wh",r=P.pageX-$.x,X=P.pageY-$.y;if(C.$2d){var g=l.offsetWidth,o=l.offsetHeight,b=g+r,D=o+X;if(b=Math.max(b,50),D=Math.max(D,50),"center"===G.position||G.position==I){var f={},u=l.getBoundingClientRect();f.x=u.left,f.y=u.top,G.position=f}"w"===U?(h.setSize(b,o),$.x+=b-g):"h"===U?(h.setSize(g,D),$.y+=D-o):"wh"===U&&(h.setSize(b,D),$.x+=b-g,$.y+=D-o),C.$3d?h.$10d.fire({kind:"betweenResize",target:h,originEvent:q}):(C.$3d=!0,h.$10d.fire({kind:"beginResize",target:h,originEvent:q}))}else if(C.$4d){var H=l.getBoundingClientRect(),v=H.width,p=H.height,z=N(),y=Q(),R=M(l.style.left)||0,j=M(l.style.top)||0,k=R+r,m=j+X,F=h.adjustPosition({x:k,y:m},{width:v,height:p},{width:z,height:y});F&&(k=F.x,m=F.y);var J=k-R,B=m-j;K(l,t,k+x),K(l,e,m+x),$.x+=J,$.y+=B,G.position={x:k,y:m},C.$5d?h.$10d.fire({kind:"betweenMove",target:h,originEvent:q}):(C.$5d=!0,h.$10d.fire({kind:"beginMove",target:h,originEvent:q}))}}},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowResize:function(){var u=this,p=u,M=p._config,Y=p.$21d,f=N(),U=Q(),P=M.width,L=M.height,C=M.position||"center";M.maximized?(K(Y,J,f+x),K(Y,j,U+x),K(Y,e,i),K(Y,t,i)):(K(Y,J,P+x),K(Y,j,L+x),"center"===C?(K(Y,t,(f-P)/2+x),K(Y,e,(U-L)/2+x)):(K(Y,t,C.x+x),K(Y,e,C.y+x))),p.iv()},handle_mousewheel:function(e){e.stopPropagation()},handle_DOMMouseScroll:function(L){L.stopPropagation()}}),w.widget.Dialog=function(P){var Q=this,p=Q._view=q.createView(null,Q);p[o]="ht-widget-dialog",K(p,k,Z),Y.baseZIndex!=I&&K(p,"z-index",Y.baseZIndex+"");var y=Q.$11d=new L(Q);Q.bindingHandleWindowResize=y.handleWindowResize.bind(Q),Q.$10d=new w.Notifier,P&&Q.setConfig(P)},D("Dialog",F,{ms_v:1,ms_fire:1,setTitle:function(O){this._config.title=O,this.getView().querySelector(".dialog-container-title span").innerHTML=O},clearNodes:function(H){if(H)for(;H.firstChild;)H.removeChild(H.firstChild)},$31d:function(){var F=this,q=F.$6d=a(),i=F._config,V=F.$12d=F.$13d();q[o]="dialog-container-title",K(q,"cursor","default"),K(q,"white-space","nowrap"),K(q,"overflow","hidden"),K(q,"font",Y.dialogTitleLabelFont),K(q,E,i.titleBackground||Y.dialogTitleBackground),K(q,"color",i.titleColor||Y.dialogTitleLabelColor);var t=z("span"),C=F.$25d();if(i.titleAlign&&K(q,"text-align",i.titleAlign),i.titleIcon){var G=F.$14d=F.$15d();v(q,G)}if(i.title&&i.title.trim&&(i.title=i.title.trim()),t[S]=i.title||"&nbsp;",v(q,t),i.maximizable){var s=F.$16d=F.$17d();v(V,s)}if(i.closable){var m=F.$18d=F.$19d();v(V,m)}return v(q,V),K(q,"display","block"),K(q,"line-height",C+x),q},$13d:function(){var u=a();return K(u,k,Z),K(u,t,i),K(u,P,5+x),K(u,e,i),K(u,m,i),K(u,"text-align",P),K(u,"white-space","nowrap"),u[o]="dialog-title-controls",u},$20d:function(){var S=this.$21d=a(),G=this._config,f=G.borderWidth;return K(S,k,"fixed"),K(S,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),K(S,"padding",i+" "+f+x+" "+f+x+" "+f+x),K(S,"box-sizing","border-box"),K(S,"-moz-box-sizing","border-box"),S[o]="dialog-container",K(S,E,G.titleBackground||Y.dialogTitleBackground),S},$22d:function(){var A,O=this,f=O._config,M=O.$7d=a(),L=f.content,H=0,U=f.contentPadding||0;f.buttons!=I&&f.buttons.length>0&&(H=32),$(L)?M[S]=L:L.getView?(A=L.getView(),v(M,A)):(A=L,v(M,A)),K(M,k,Z),K(M,"font",Y.dialogContentLabelFont),w.Default.appendToScreen(M);var d=M.offsetWidth+1,G=M.offsetHeight,T=O.$25d();return f.width==I&&(f.width=d+10+2*U),f.height==I&&(f.height=G+T+H+5+2*U),w.Default.removeHTML(M),A&&(K(A,"box-sizing","border-box"),K(A,"-moz-box-sizing","border-box"),K(A,J,"100%"),K(A,j,"100%")),M[o]="dialog-content",K(M,e,T+U+x),K(M,m,H+U+x),K(M,t,U+x),K(M,P,U+x),K(M,"overflow","hidden"),M},getOverlayDiv:function(){return this.$41d},$23d:function(){var L=this.$41d=a();return L[o]="dialog-overlay",K(L,J,"100%"),K(L,j,"100%"),K(L,k,"fixed"),K(L,e,i),K(L,t,i),K(L,E,"rgba(235, 235, 235, 0.7)"),L},_config:I,setSize:function(P,q){var V=this,i=V._config;i&&(i.width=P,i.height=q,V.isShowing()&&(V.bindingHandleWindowResize(),V.iv()))},getConfig:function(){return this._config},$24d:function(){var k=this._config,m=k.titleIconSize||16;return d&&(m*=1.2),m},$25d:function(){var D=this._config,P=D.titleHeight||Y.widgetTitleHeight;return P},$26d:function(f){K(f,"cursor","pointer"),K(f,"display","inline-block"),K(f,"margin-right",(d?8:4)+x),K(f,"vertical-align",e)},$27d:function(){var X=this.$30d=a(),c=10;return d&&(c=20),K(X,J,c+x),K(X,j,c+x),K(X,k,Z),K(X,m,i),K(X,P,i),X[o]="resize-area",X},$15d:function(){var K=this,h=f();h[o]="dialog-title-control dialog-title-control-icon";var Q=K.$25d(),R=K.$24d();return K.$26d(h),q.setCanvas(h,R,Q),h},$17d:function(){var L=f();L[o]="dialog-title-control dialog-title-control-maximize";var S=this.$25d(),R=this.$24d();return this.$26d(L),q.setCanvas(L,R,S),L},$19d:function(){var Y=f();Y[o]="dialog-title-control dialog-title-control-close";var H=this.$25d(),s=this.$24d();return this.$26d(Y),q.setCanvas(Y,s,H),Y},$28d:function(){var R=a();return K(R,E,Y.dialogContentBackground||"white"),K(R,J,"100%"),K(R,j,"100%"),K(R,k,"relative"),R},$29d:function(){var n=this,M=a();K(M,"line-height",32+x),K(M,k,Z),K(M,m,i),K(M,t,i),K(M,"white-space","nowrap"),K(M,"overflow","hidden"),K(M,P,i),K(M,E,Y.dialogHeaderBackground),M[o]="dialog-container-buttons";var F=this._config,j=F.buttonsAlign||P,V=0;return K(M,"text-align",j),n.$42d=[],F.buttons.forEach(function(q){var $=new w.widget.Button,O=$.getView();O[o]="dialog-button "+q.className,O.buttonItem=q,n.$42d.push($),$.setBorderColor(I),$.setBackground(Y.dialogButtonBackground),$.setSelectBackground(Y.dialogButtonSelectBackground),$.setLabelColor(Y.dialogButtonLabelColor),K(O,k,"relative"),K(O,"display","inline-block"),K(O,"text-align",t),K(O,"height",24+x);var C=d?10:5;j===t||j===P?K(O,"margin-"+j,C+x):0===V||K(O,"margin-"+t,C+x),K(O,"vertical-align","middle");var p=Y.getTextSize($.getLabelFont(),q.label).width+10;$.onClicked=function(w){q.action&&q.action.call(n,q,w)},$.setLabel(q.label),$.setDisabled(q.disabled),K(O,J,p+x),v(M,$.getView()),V++}),M},setConfig:function(x){if(x){var W=this,C=W._view;W._config=x,W.action=x.action,W.clearNodes(C),x.borderWidth==I&&(x.borderWidth=5);var d=W.$23d(),z=W.$28d(),Z=W.$31d(),b=W.$22d(),R=W.$20d(),O=W.$30d=W.$27d();if(v(C,d),v(C,R),v(R,z),v(z,Z),v(z,b),x.buttons!=I&&x.buttons.length>0){var k=W.$29d();v(z,k)}v(R,O),x.maximized?(x.maximized=!1,W.bindingHandleWindowResize(),W.maximize(!0)):W.bindingHandleWindowResize(),W.isShowing()&&W.iv()}},hide:function(){var t=this,X=t.$21d,O=t.$41d,k=t._view;k[o]="ht-widget-dialog",A(X).duration(200).scale(.7).set(R,i).end(function(){t.onHidden&&t.onHidden(),w.Default.removeHTML(k),t.$10d.fire({kind:"hide",target:t})}),A(O).duration(200).set(R,i).end(),l(b,"resize",t.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(D){this.$41d.style.display=D?"block":"none"},isModal:function(){return"none"!==this.$41d.style.display},$32d:function(){var n=this,j=n._config,k=n.$21d;s(k,W),n.iv(),j.maximized?n.$10d.fire({kind:"maximize",target:n}):n.$10d.fire({kind:"restore",target:n})},maximize:function(w){var b=this,s=b.$21d,p=b._config;if(!p.maximized){p.maximized=!0,b.$33d(),b.$16d[o]="dialog-title-control dialog-title-control-minimize";var u=N(),v=Q(),W=p.width,l=p.height,c=M(s.style.left)||0,R=M(s.style.top)||0;b.$36d=W,b.$37d=l,b.$34d=c,b.$35d=R;var m=w?0:200;A(s).duration(m).set(t,i).set(e,i).set(J,u+x).set(j,v+x).end(function(){b.$32d()})}},restore:function(){var c=this,g=c.$34d,V=c.$35d,a=c.$36d,m=c.$37d,v=c._config;if(v.maximized&&(v.maximized=!1,c.$33d(),c.$16d[o]="dialog-title-control dialog-title-control-maximize",c.isShowing()&&g!=I&&V!=I&&a!=I&&m!=I)){var O=c.$21d;A(O).duration(200).set(t,g+x).set(e,V+x).set(J,a+x).set(j,m+x).end(function(){c.$32d()})}delete c.$34d,delete c.$35d,delete c.$36d,delete c.$37d},show:function(){var m=this,P=m._view,T=m._config,r=m.$21d,t=m.$41d;T&&T.zIndex!=I&&K(P,"z-index",T.zIndex+W),w.Default.appendToScreen(P),s(r,"scale(0.7)"),K(r,R,i),m.iv(),m.validate(),m._view[o]+=" dialog-show",B(function(){A(r).duration(200).scale(1).set(R,"1").end(function(){K(r,J,r.clientWidth+x),K(r,j,r.clientHeight+x),m.onShown&&m.onShown(),m.$10d.fire({kind:"show",target:m});var W=T&&T.content;W&&W.iv&&W.iv()}),A(t).duration(200).set(R,"1").end(),_(b,"resize",m.bindingHandleWindowResize)},30)},setPosition:function(A){var Y=this.$21d;Y.style.left=A.x+"px",Y.style.top=A.y+"px"},addEventListener:function(O,z,C){this.$10d.add(O,z,C)},removeEventListener:function(W,e){this.$10d.remove(W,e)},$38d:function(Q,R,S,m){var b=q.initContext(Q);q.translateAndScale(b,0,0,1),b.clearRect(0,0,S,S);var D=(S-m)/2;Y.drawStretchImage(b,Y.getImage(R),"fill",0,D,m,m),b.restore()},$33d:function(){var J=this,t=J._config,R=J.$16d,u=t.maximized?Y.dialogRestoreIcon:Y.dialogMaximizeIcon;if(R&&u){var $=J.$25d(),f=J.$24d();J.$38d(R,Y.getImage(u),$,f)}},$39d:function(){var w=this,I=w._config,O=w.$14d,D=I.titleIcon;if(O&&D){var P=w.$25d(),k=w.$24d();w.$38d(O,Y.getImage(D),P,k)}},$40d:function(){var H=this,w=H.$18d,l=Y.dialogCloseIcon;if(w&&l){var A=H.$25d(),i=H.$24d();H.$38d(w,Y.getImage(l),A,i)}},invalidate:function(r){var l=this,j=l.$42d;l._68I||(l._68I=1,Y.callLater(l.validate,l,I,r),l.onInvalidated&&l.onInvalidated(),l.fireViewEvent("invalidate"));var M=l._config.content;M.invalidate&&M.invalidate(),j&&j.forEach(function(K){K.iv()})},validateImpl:function(){var K=this;K.$40d(),K.$33d(),K.$39d();var v=K._config.content;v.initView&&(v.setX(0),v.setY(0),v.setWidth(K.$7d.clientWidth),v.setHeight(K.$7d.clientHeight))},adjustPosition:function(x,A,J){var C=A.width,D=A.height,n=J.width,y=J.height,i=x.x,f=x.y,c=this._config,F=c.minDragSize||20;return"inside"===c.dragMode?(i+C>n&&(i=n-C),f+D>y&&(f=y-D),0>i&&(i=0),0>f&&(f=0)):(null==c.dragMode||"none"===c.dragMode)&&(-C+F>i&&(i=-C+F),i>n-F&&(i=n-F),f>y-F&&(f=y-F),0>f&&(f=0)),{x:i,y:f}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);