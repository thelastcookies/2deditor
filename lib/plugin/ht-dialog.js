!function(P,Y){"use strict";var d="ht",u=P[d],e="px",Q="left",_="top",g="bottom",Z="right",s="innerHTML",v="className",M="",w="width",F="height",m="string",X="position",V="absolute",H="0",n="opacity",J="background",i=u.Default,S=i.getInternal(),x=u.Color,y=i.animate,o=i.isTouchable,B=null,A=(Math.sqrt,P.parseInt),O=P.setTimeout,D=(Math.round,x.titleIconBackground),p=function(e){return typeof e===m||e instanceof String},T=function(){return document},W=function(g){return T().createElement(g)},K=function(){var s=W("div");return s.tabIndex=-1,s.style.outline="none",s},k=function(){return W("canvas")},R=function(L,E){r(L,"-webkit-transform",E),r(L,"-ms-transform",E),r(L,"transform",E)},r=function(Q,R,Z){Q.style.setProperty(R,Z,B)},I=function(A,m,G){i.def(u.widget[A],m,G)},j=function(k,y){k.appendChild(y)},c=function(){return T().documentElement},l=function(){return c().clientWidth},C=function(){return c().clientHeight},t=S.addEventListener,h=S.removeEventListener,L=function(t){var y=t.touches[0];return y?y:t.changedTouches[0]};S.addMethod(i,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:D},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:D}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:D},{type:"rect",rect:[10,10,80,20],background:D}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:D},{type:"rect",rect:[10,34,56,14],background:D},{type:"rect",rect:[34,10,56,14],background:D},{type:"rect",rect:[82,10,8,56],background:D},{type:"rect",rect:[66,62,24,8],background:D}]},dialogTitleLabelColor:i.labelSelectColor,dialogTitleLabelFont:(o?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:i.labelFont,dialogTitleBackground:x.titleBackground,dialogHeaderBackground:x.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var f=function(l){var Q=this;Q.$1d=l,Q.addListeners()};i.def(f,Y,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(C){var d=this,I=d.$1d,x=I.$6d,l=I._config,p=I.$7d,z=C,u=C.target;if(p.contains(u)||i.preventDefault(C),i.isLeftButton(C)){o&&(z=L(C));var J=d.$8d={x:z.pageX,y:z.pageY};d.$9d={x:J.x,y:J.y},!l.maximized&&l.draggable&&x.contains(u)&&(d.$4d=!0,i.startDragging(d,C)),d.handle_mousemove(C)&&(d.$2d=!0,i.startDragging(d,C)),p.contains(C.target)||I.$41d.focus()}},handle_mousedown:function(s){this.handle_touchstart(s)},handle_touchend:function(X){if(i.isLeftButton(X)&&!this.$5d&&!this.$3d){var o=this,j=o.$1d,U=X.target,s=j._config,k=j.$18d,S=j.$16d;for(s.closable&&k.contains(U)&&j.hide(),s.maximizable&&S.contains(U)&&(s.maximized?j.restore():j.maximize());U&&(U.className||"").indexOf("dialog-button")<0;)U=U.parentNode;U&&U.buttonItem&&j.action&&j.action(U.buttonItem,X),delete o.$8d,delete o.$9d}},handle_mouseup:function(W){this.handle_touchend(W)},handleWindowTouchEnd:function(h){var Q=this,q=Q.$1d,H=q.$10d;Q.$2d&&Q.$3d?H.fire({kind:"endResize",target:q,originEvent:h}):Q.$4d&&Q.$5d&&H.fire({kind:"endMove",target:q,originEvent:h}),this.clear()},handleWindowMouseUp:function(w){this.handleWindowTouchEnd(w)},handle_mousemove:function(g){var h=this.$1d._config;if(h.maximized)return!1;if("w"!==h.resizeMode&&"h"!==h.resizeMode&&"wh"!==h.resizeMode)return!1;var w=this,s=w.getView(),t=s.querySelector(".resize-area"),z=t.getBoundingClientRect(),K={x:z.left,y:z.top,width:z.width,height:z.height};g=o?L(g):g;var a=g.clientX,u=g.clientY,W={x:a,y:u};return i.containsPoint(K,W)?(r(s,"cursor","nwse-resize"),!0):(r(s,"cursor",M),void 0)},handleWindowTouchMove:function(T){T.preventDefault();var S=T;o&&(S=L(T));var G=this,x=G.$8d,n=G.$9d;if(!(n.x==x.x&&n.y==x.y&&i.getDistance(n,{x:S.pageX,y:S.pageY})<=1)){var m=G.$1d,f=m._config,s=m.$21d,w=f.resizeMode||"wh",j=S.pageX-x.x,D=S.pageY-x.y;if(G.$2d){var Y=s.offsetWidth,k=s.offsetHeight,M=Y+j,K=k+D;if(M=Math.max(M,50),K=Math.max(K,50),"center"===f.position||f.position==B){var E={},q=s.getBoundingClientRect();E.x=q.left,E.y=q.top,f.position=E}"w"===w?(m.setSize(M,k),x.x+=M-Y):"h"===w?(m.setSize(Y,K),x.y+=K-k):"wh"===w&&(m.setSize(M,K),x.x+=M-Y,x.y+=K-k),G.$3d?m.$10d.fire({kind:"betweenResize",target:m,originEvent:T}):(G.$3d=!0,m.$10d.fire({kind:"beginResize",target:m,originEvent:T}))}else if(G.$4d){var I=s.getBoundingClientRect(),d=I.width,J=I.height,v=l(),b=C(),Z=A(s.style.left)||0,W=A(s.style.top)||0,p=Z+j,g=W+D,y=m.adjustPosition({x:p,y:g},{width:d,height:J},{width:v,height:b});y&&(p=y.x,g=y.y);var H=p-Z,c=g-W;r(s,Q,p+e),r(s,_,g+e),x.x+=H,x.y+=c,f.position={x:p,y:g},G.$5d?m.$10d.fire({kind:"betweenMove",target:m,originEvent:T}):(G.$5d=!0,m.$10d.fire({kind:"beginMove",target:m,originEvent:T}))}}},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowResize:function(){var i=this,K=i,Y=K._config,W=K.$21d,X=l(),q=C(),p=Y.width,d=Y.height,A=Y.position||"center";Y.maximized?(r(W,w,X+e),r(W,F,q+e),r(W,_,H),r(W,Q,H)):(r(W,w,p+e),r(W,F,d+e),"center"===A?(r(W,Q,(X-p)/2+e),r(W,_,(q-d)/2+e)):(r(W,Q,A.x+e),r(W,_,A.y+e))),K.iv()},handle_mousewheel:function(O){O.stopPropagation()},handle_DOMMouseScroll:function(u){u.stopPropagation()}}),u.widget.Dialog=function(M){var A=this,H=A._view=S.createView(null,A);H[v]="ht-widget-dialog",r(H,X,V),i.baseZIndex!=B&&r(H,"z-index",i.baseZIndex+"");var R=A.$11d=new f(A);A.bindingHandleWindowResize=R.handleWindowResize.bind(A),A.$10d=new u.Notifier,M&&A.setConfig(M)},I("Dialog",Y,{ms_v:1,ms_fire:1,setTitle:function(F){this._config.title=F,this.getView().querySelector(".dialog-container-title span").innerHTML=F},clearNodes:function(S){if(S)for(;S.firstChild;)S.removeChild(S.firstChild)},$31d:function(){var g=this,d=g.$6d=K(),O=g._config,L=g.$12d=g.$13d();d[v]="dialog-container-title",r(d,"cursor","default"),r(d,"white-space","nowrap"),r(d,"overflow","hidden"),r(d,"font",i.dialogTitleLabelFont),r(d,J,O.titleBackground||i.dialogTitleBackground),r(d,"color",O.titleColor||i.dialogTitleLabelColor);var N=W("span"),p=g.$25d();if(O.titleAlign&&r(d,"text-align",O.titleAlign),O.titleIcon){var q=g.$14d=g.$15d();j(d,q)}if(O.title&&O.title.trim&&(O.title=O.title.trim()),N[s]=O.title||"&nbsp;",j(d,N),O.maximizable){var b=g.$16d=g.$17d();j(L,b)}if(O.closable){var $=g.$18d=g.$19d();j(L,$)}return j(d,L),r(d,"display","block"),r(d,"line-height",p+e),d},$13d:function(){var E=K();return r(E,X,V),r(E,Q,H),r(E,Z,5+e),r(E,_,H),r(E,g,H),r(E,"text-align",Z),r(E,"white-space","nowrap"),E[v]="dialog-title-controls",E},$20d:function(){var Y=this.$21d=K(),Z=this._config,u=Z.borderWidth;return r(Y,X,"fixed"),r(Y,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),r(Y,"padding",H+" "+u+e+" "+u+e+" "+u+e),r(Y,"box-sizing","border-box"),r(Y,"-moz-box-sizing","border-box"),Y[v]="dialog-container",r(Y,J,Z.titleBackground||i.dialogTitleBackground),Y},$22d:function(){var U,l=this,M=l._config,I=l.$7d=K(),n=M.content,k=0,H=M.contentPadding||0;M.buttons!=B&&M.buttons.length>0&&(k=32),p(n)?I[s]=n:n.getView?(U=n.getView(),j(I,U)):(U=n,j(I,U)),r(I,X,V),r(I,"font",i.dialogContentLabelFont),u.Default.appendToScreen(I);var h=I.offsetWidth+1,o=I.offsetHeight,q=l.$25d();return M.width==B&&(M.width=h+10+2*H),M.height==B&&(M.height=o+q+k+5+2*H),u.Default.removeHTML(I),U&&(r(U,"box-sizing","border-box"),r(U,"-moz-box-sizing","border-box"),r(U,w,"100%"),r(U,F,"100%")),I[v]="dialog-content",r(I,_,q+H+e),r(I,g,k+H+e),r(I,Q,H+e),r(I,Z,H+e),r(I,"overflow","hidden"),I},getOverlayDiv:function(){return this.$41d},$23d:function(){var U=this.$41d=K();return U[v]="dialog-overlay",r(U,w,"100%"),r(U,F,"100%"),r(U,X,"fixed"),r(U,_,H),r(U,Q,H),r(U,J,"rgba(235, 235, 235, 0.7)"),U},_config:B,setSize:function(r,x){var N=this,a=N._config;a&&(a.width=r,a.height=x,N.isShowing()&&(N.bindingHandleWindowResize(),N.iv()))},getConfig:function(){return this._config},$24d:function(){var F=this._config,M=F.titleIconSize||16;return o&&(M*=1.2),M},$25d:function(){var U=this._config,p=U.titleHeight||i.widgetTitleHeight;return p},$26d:function(L){r(L,"cursor","pointer"),r(L,"display","inline-block"),r(L,"margin-right",(o?8:4)+e),r(L,"vertical-align",_)},$27d:function(){var J=this.$30d=K(),x=10;return o&&(x=20),r(J,w,x+e),r(J,F,x+e),r(J,X,V),r(J,g,H),r(J,Z,H),J[v]="resize-area",J},$15d:function(){var E=this,i=k();i[v]="dialog-title-control dialog-title-control-icon";var K=E.$25d(),A=E.$24d();return E.$26d(i),S.setCanvas(i,A,K),i},$17d:function(){var h=k();h[v]="dialog-title-control dialog-title-control-maximize";var E=this.$25d(),F=this.$24d();return this.$26d(h),S.setCanvas(h,F,E),h},$19d:function(){var F=k();F[v]="dialog-title-control dialog-title-control-close";var o=this.$25d(),B=this.$24d();return this.$26d(F),S.setCanvas(F,B,o),F},$28d:function(){var D=K();return r(D,J,i.dialogContentBackground||"white"),r(D,w,"100%"),r(D,F,"100%"),r(D,X,"relative"),D},$29d:function(){var L=this,p=K();r(p,"line-height",32+e),r(p,X,V),r(p,g,H),r(p,Q,H),r(p,"white-space","nowrap"),r(p,"overflow","hidden"),r(p,Z,H),r(p,J,i.dialogHeaderBackground),p[v]="dialog-container-buttons";var y=this._config,t=y.buttonsAlign||Z,T=0;return r(p,"text-align",t),L.$42d=[],y.buttons.forEach(function(K){var m=new u.widget.Button,y=m.getView();y[v]="dialog-button "+K.className,y.buttonItem=K,L.$42d.push(m),m.setBorderColor(B),m.setBackground(i.dialogButtonBackground),m.setSelectBackground(i.dialogButtonSelectBackground),m.setLabelColor(i.dialogButtonLabelColor),r(y,X,"relative"),r(y,"display","inline-block"),r(y,"text-align",Q),r(y,"height",24+e);var D=o?10:5;t===Q||t===Z?r(y,"margin-"+t,D+e):0===T||r(y,"margin-"+Q,D+e),r(y,"vertical-align","middle");var _=i.getTextSize(m.getLabelFont(),K.label).width+10;m.onClicked=function(W){K.action&&K.action.call(L,K,W)},m.setLabel(K.label),m.setDisabled(K.disabled),r(y,w,_+e),j(p,m.getView()),T++}),p},setConfig:function(h){if(h){var z=this,p=z._view;z._config=h,z.action=h.action,z.clearNodes(p),h.borderWidth==B&&(h.borderWidth=5);var H=z.$23d(),w=z.$28d(),A=z.$31d(),k=z.$22d(),F=z.$20d(),V=z.$30d=z.$27d();if(j(p,H),j(p,F),j(F,w),j(w,A),j(w,k),h.buttons!=B&&h.buttons.length>0){var b=z.$29d();j(w,b)}j(F,V),h.maximized?(h.maximized=!1,z.bindingHandleWindowResize(),z.maximize(!0)):z.bindingHandleWindowResize(),z.isShowing()&&z.iv()}},hide:function(){var _=this,s=_.$21d,z=_.$41d,$=_._view;$[v]="ht-widget-dialog",y(s).duration(200).scale(.7).set(n,H).end(function(){_.onHidden&&_.onHidden(),u.Default.removeHTML($),_.$10d.fire({kind:"hide",target:_})}),y(z).duration(200).set(n,H).end(),h(P,"resize",_.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(x){this.$41d.style.display=x?"block":"none"},isModal:function(){return"none"!==this.$41d.style.display},$32d:function(){var W=this,E=W._config,k=W.$21d;R(k,M),W.iv(),E.maximized?W.$10d.fire({kind:"maximize",target:W}):W.$10d.fire({kind:"restore",target:W})},maximize:function(z){var L=this,s=L.$21d,G=L._config;if(!G.maximized){G.maximized=!0,L.$33d(),L.$16d[v]="dialog-title-control dialog-title-control-minimize";var R=l(),g=C(),P=G.width,W=G.height,T=A(s.style.left)||0,h=A(s.style.top)||0;L.$36d=P,L.$37d=W,L.$34d=T,L.$35d=h;var U=z?0:200;y(s).duration(U).set(Q,H).set(_,H).set(w,R+e).set(F,g+e).end(function(){L.$32d()})}},restore:function(){var I=this,M=I.$34d,D=I.$35d,R=I.$36d,G=I.$37d,f=I._config;if(f.maximized&&(f.maximized=!1,I.$33d(),I.$16d[v]="dialog-title-control dialog-title-control-maximize",I.isShowing()&&M!=B&&D!=B&&R!=B&&G!=B)){var Z=I.$21d;y(Z).duration(200).set(Q,M+e).set(_,D+e).set(w,R+e).set(F,G+e).end(function(){I.$32d()})}delete I.$34d,delete I.$35d,delete I.$36d,delete I.$37d},show:function(){var X=this,Q=X._view,_=X._config,N=X.$21d,C=X.$41d;_&&_.zIndex!=B&&r(Q,"z-index",_.zIndex+M),u.Default.appendToScreen(Q),R(N,"scale(0.7)"),r(N,n,H),X.iv(),X.validate(),X._view[v]+=" dialog-show",O(function(){y(N).duration(200).scale(1).set(n,"1").end(function(){r(N,w,N.clientWidth+e),r(N,F,N.clientHeight+e),X.onShown&&X.onShown(),X.$10d.fire({kind:"show",target:X});var c=_&&_.content;c&&c.iv&&c.iv()}),y(C).duration(200).set(n,"1").end(),t(P,"resize",X.bindingHandleWindowResize)},30)},setPosition:function(m){var v=this.$21d;v.style.left=m.x+"px",v.style.top=m.y+"px"},addEventListener:function(g,j,J){this.$10d.add(g,j,J)},removeEventListener:function(P,A){this.$10d.remove(P,A)},$38d:function(E,L,U,T){var B=S.initContext(E);S.translateAndScale(B,0,0,1),B.clearRect(0,0,U,U);var Y=(U-T)/2;i.drawStretchImage(B,i.getImage(L),"fill",0,Y,T,T),B.restore()},$33d:function(){var U=this,J=U._config,Z=U.$16d,x=J.maximized?i.dialogRestoreIcon:i.dialogMaximizeIcon;if(Z&&x){var e=U.$25d(),P=U.$24d();U.$38d(Z,i.getImage(x),e,P)}},$39d:function(){var L=this,b=L._config,C=L.$14d,X=b.titleIcon;if(C&&X){var h=L.$25d(),s=L.$24d();L.$38d(C,i.getImage(X),h,s)}},$40d:function(){var Y=this,d=Y.$18d,B=i.dialogCloseIcon;if(d&&B){var r=Y.$25d(),V=Y.$24d();Y.$38d(d,i.getImage(B),r,V)}},invalidate:function(k){var w=this,f=w.$42d;w._68I||(w._68I=1,i.callLater(w.validate,w,B,k),w.onInvalidated&&w.onInvalidated(),w.fireViewEvent("invalidate"));var g=w._config.content;g.invalidate&&g.invalidate(),f&&f.forEach(function(V){V.iv()})},validateImpl:function(){var $=this;$.$40d(),$.$33d(),$.$39d();var u=$._config.content;u.initView&&(u.setX(0),u.setY(0),u.setWidth($.$7d.clientWidth),u.setHeight($.$7d.clientHeight))},adjustPosition:function(x,M,p){var S=M.width,F=M.height,d=p.width,k=p.height,t=x.x,e=x.y,C=this._config,o=C.minDragSize||20;return"inside"===C.dragMode?(t+S>d&&(t=d-S),e+F>k&&(e=k-F),0>t&&(t=0),0>e&&(e=0)):(null==C.dragMode||"none"===C.dragMode)&&(-S+o>t&&(t=-S+o),t>d-o&&(t=d-o),e>k-o&&(e=k-o),0>e&&(e=0)),{x:t,y:e}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);