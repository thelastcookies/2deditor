!function(w){"use strict";var B="ht",K=w[B],X=K.Default,d=Math,y=(d.PI,d.sin,d.cos,d.atan2,d.sqrt,d.max),n=d.floor,x=(d.round,d.ceil),u=K.Shape,U=(K.Edge,K.List),S=K.Style,E=K.graph,c=X.getInternal(),M=c.ui(),A=null,i="prototype",G=w.clearInterval,O=w.setInterval,C=function(W){var D=W.data,B=this.dm();if(D&&"add"===W.kind){var X=B.$1c,b=D instanceof u?"shape.":"edge.";X&&D.s(b+"dash.flow")&&X.indexOf(D)<0&&X.push(D)}"clear"===W.kind&&(B.$1c=[])},$=function(M){var $=M.property,Z=M.data,H=M.newValue,J=this.dm().$1c,D=Z instanceof u?"s:shape.dash.flow":"s:edge.dash.flow";if(J&&$===D)if(H)J.indexOf(Z)<0&&J.push(Z);else for(var f=J.length,P=0;f>P;P++)if(J[P]===Z){J.splice(P,1);break}},s=E.GraphView[i],F=M.EdgeUI[i],H=M.ShapeUI[i],R=H._80o,a=F._80o,f=K.DataModel[i],q=f.prepareRemove,L=s.setDataModel;S["edge.dash.flow.step"]==A&&(S["edge.dash.flow.step"]=3),S["shape.dash.flow.step"]==A&&(S["shape.dash.flow.step"]=3),f.prepareRemove=function(E){q.call(this,E);var O=E._dataModel,B=O.$1c;if(B)for(var h=B.length,f=0;h>f;f++)if(B[f]===E){B.splice(f,1);break}},s.setDataModel=function(j){var B=this,J=B._dataModel;if(J!==j){J&&(J.umm(C,B),J.umd($,B),J.$1c=[]),j.mm(C,B),j.md($,B);var Z=j.$1c=[];j.each(function(j){var X=j instanceof u?"shape.":"edge.";j.s(X+"dash.flow")&&Z.indexOf(j)<0&&Z.push(j)}),L.call(B,j)}},s.setDashFlowInterval=function(h){var W=this,w=W.$2c;W.$2c=h,W.fp("dashFlowInterval",w,h),W.$3c!=A&&(G(W.$3c),delete W.$3c,W.enableDashFlow(h))},s.getDashFlowInterval=function(){return this.$2c},s.$4c=function(){var O,R,j,h=this,o=h.tx(),v=h.ty(),u=h._zoom,d=h.getWidth(),S=h.getHeight(),p={x:-o/u,y:-v/u,width:d/u,height:S/u},V=h.dm().$1c,e=h._56I,s=new U;if(V.forEach(function(J){e[J.getId()]&&(O=h.getDataUI(J),O&&(j=O._79o(),j&&s.add(j)))}),0!==s.size()&&(s.each(function(s){X.intersectsRect(p,s)&&(R=X.unionRect(R,s))}),R&&(R&&(X.grow(R,y(1,1/u)),R.x=n(R.x*u)/u,R.y=n(R.y*u)/u,R.width=x(R.width*u)/u,R.height=x(R.height*u)/u,R=X.intersection(p,R)),R))){var L=h._canvas.getContext("2d");L.save(),L.lineCap=X.lineCap,L.lineJoin=X.lineJoin;var P=X.devicePixelRatio,M=R.x,A=R.y,w=R.width,r=R.height;M=Math.floor((M*u+o)*P),A=Math.floor((A*u+v)*P),w=Math.ceil(w*u*P)+1,r=Math.ceil(r*u*P)+1,R.x=(M/P-o)/u,R.y=(A/P-v)/u,R.width=w/P/u,R.height=r/P/u,L.beginPath(),L.rect(M,A,w,r),L.clip(),L.clearRect(M,A,w,r),c.translateAndScale(L,o,v,u),h.$5c(L,R),L.restore()}},s.$5c=function(a,D){var P,u,Z=this;Z._93db(a),Z.each(function(F){Z._56I[F._id]&&(P=Z.getDataUI(F),P&&(u=P._79o(),(!D||X.intersectsRect(D,u))&&(P.$7c=!0,P._42(a),delete P.$7c)))}),Z._92db(a)},s.enableDashFlow=function(I){var m=this;m.$3c==A&&(m.$3c=O(function(){m.$4c()},I||m.$2c||50))},s.disableDashFlow=function(){var z=this;G(z.$3c),delete z.$3c};var e=function(){var e=this,S=e._data,n=S instanceof u?"shape.":"edge.",j=S.s(n+"dash.pattern"),G=S.s(n+"dash.flow.reverse");if(j&&S.s(n+"dash")&&S.s(n+"dash.flow")&&e.$7c){var o=e.s(n+"dash.offset")||0,r=S.s(n+"dash.flow.step"),$=S.getStyleMap(),A=0;j.forEach(function(Y){A+=Y}),G&&(r=-r),o-=r,o%=A,$||(S._styleMap=$={}),$[n+"dash.offset"]=o}};F._80o=function(v){a.call(this,v),e.call(this)},H._80o=function(t){R.call(this,t),e.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);