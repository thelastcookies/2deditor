!function(h){"use strict";var k="ht",J=h[k],u=J.Default,C=Math,o=(C.PI,C.sin,C.cos,C.atan2,C.sqrt,C.max),M=C.floor,O=(C.round,C.ceil),N=J.Shape,n=(J.Edge,J.List),Z=J.Style,v=J.graph,j=u.getInternal(),s=j.ui(),_=null,S="prototype",V=h.clearInterval,E=h.setInterval,K=function(A){var m=A.data,W=this.dm();if(m&&"add"===A.kind){var x=W.$1c,b=m instanceof N?"shape.":"edge.";x&&m.s(b+"dash.flow")&&x.indexOf(m)<0&&x.push(m)}"clear"===A.kind&&(W.$1c=[])},y=function(j){var A=j.property,p=j.data,F=j.newValue,V=this.dm().$1c,t=p instanceof N?"s:shape.dash.flow":"s:edge.dash.flow";if(V&&A===t)if(F)V.indexOf(p)<0&&V.push(p);else for(var P=V.length,w=0;P>w;w++)if(V[w]===p){V.splice(w,1);break}},P=v.GraphView[S],t=s.EdgeUI[S],w=s.ShapeUI[S],l=w._80o,R=t._80o,B=J.DataModel[S],e=B.prepareRemove,X=P.setDataModel;Z["edge.dash.flow.step"]==_&&(Z["edge.dash.flow.step"]=3),Z["shape.dash.flow.step"]==_&&(Z["shape.dash.flow.step"]=3),B.prepareRemove=function(f){e.call(this,f);var y=f._dataModel,v=y.$1c;if(v)for(var T=v.length,b=0;T>b;b++)if(v[b]===f){v.splice(b,1);break}},P.setDataModel=function(b){var v=this,D=v._dataModel;if(D!==b){D&&(D.umm(K,v),D.umd(y,v),D.$1c=[]),b.mm(K,v),b.md(y,v);var M=b.$1c=[];b.each(function(E){var V=E instanceof N?"shape.":"edge.";E.s(V+"dash.flow")&&M.indexOf(E)<0&&M.push(E)}),X.call(v,b)}},P.setDashFlowInterval=function(D){var L=this,Y=L.$2c;L.$2c=D,L.fp("dashFlowInterval",Y,D),L.$3c!=_&&(V(L.$3c),delete L.$3c,L.enableDashFlow(D))},P.getDashFlowInterval=function(){return this.$2c},P.$4c=function(){var T,k,L,Q=this,$=Q.tx(),H=Q.ty(),X=Q._zoom,g=Q.getWidth(),p=Q.getHeight(),R={x:-$/X,y:-H/X,width:g/X,height:p/X},c=Q.dm().$1c,A=Q._56I,Z=new n;if(c.forEach(function(D){A[D.getId()]&&(T=Q.getDataUI(D),T&&(L=T._79o(),L&&Z.add(L)))}),0!==Z.size()&&(Z.each(function(W){u.intersectsRect(R,W)&&(k=u.unionRect(k,W))}),k&&(k&&(u.grow(k,o(1,1/X)),k.x=M(k.x*X)/X,k.y=M(k.y*X)/X,k.width=O(k.width*X)/X,k.height=O(k.height*X)/X,k=u.intersection(R,k)),k))){var a=Q._canvas.getContext("2d");a.save(),a.lineCap=u.lineCap,a.lineJoin=u.lineJoin;var s=u.devicePixelRatio,I=k.x,F=k.y,z=k.width,f=k.height;I=Math.floor((I*X+$)*s),F=Math.floor((F*X+H)*s),z=Math.ceil(z*X*s)+1,f=Math.ceil(f*X*s)+1,k.x=(I/s-$)/X,k.y=(F/s-H)/X,k.width=z/s/X,k.height=f/s/X,a.beginPath(),a.rect(I,F,z,f),a.clip(),a.clearRect(I,F,z,f),j.translateAndScale(a,$,H,X),Q.$5c(a,k),a.restore()}},P.$5c=function(U,i){var $,C,f=this;f._93db(U),f.each(function(n){f._56I[n._id]&&($=f.getDataUI(n),$&&(C=$._79o(),(!i||u.intersectsRect(i,C))&&($.$7c=!0,$._42(U),delete $.$7c)))}),f._92db(U)},P.enableDashFlow=function(w){var A=this;A.$3c==_&&(A.$3c=E(function(){A.$4c()},w||A.$2c||50))},P.disableDashFlow=function(){var n=this;V(n.$3c),delete n.$3c};var z=function(){var i=this,O=i._data,F=O instanceof N?"shape.":"edge.",$=O.s(F+"dash.pattern"),h=O.s(F+"dash.flow.reverse");if($&&O.s(F+"dash")&&O.s(F+"dash.flow")&&i.$7c){var s=i.s(F+"dash.offset")||0,W=O.s(F+"dash.flow.step"),J=O.getStyleMap(),f=0;$.forEach(function(G){f+=G}),h&&(W=-W),s-=W,s%=f,J||(O._styleMap=J={}),J[F+"dash.offset"]=s}};t._80o=function(c){R.call(this,c),z.call(this)},w._80o=function(A){l.call(this,A),z.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);