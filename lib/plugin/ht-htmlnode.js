!function(y){"use strict";var Y="ht",t=y[Y],l=function(){return document},z=function(){return l().body},U=function(Q,g,e){Q.style.setProperty(g,e,null)},N=function(u){return l().createElement(u)},X=function(){return N("div")},A=function(){var Z=N("canvas");return Z},q=function(Q,A){U(Q,"-webkit-transform",A),U(Q,"-ms-transform",A),U(Q,"transform",A)},I=function(x,e){U(x,"-webkit-transform-origin",e),U(x,"-ms-transform-origin",e),U(x,"transform-origin",e)},u=function(F,K){F.appendChild(K)},$=function(j,r){j.removeChild(r)},K=y.parseInt,P=t.Default,f=P.getInternal(),n=f.addEventListener,L=(f.removeEventListener,Math.PI),C="white-space",v="visibility",J="left",i="top",m="width",_="height",p="position",Q="display",r="z-index",R="px",c="0 0",D="absolute",x="visible",k="hidden",S="none",b="block",F="nowrap",T="rgba(0, 0, 0, 0.005)";P.setImage("node_dragger","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAN9JREFUeNrsV9sNhDAMKyzQVdgARmGzrMJNUFZhAh6nfkVcG9PQgHSR8lEksJs6pnGuLCimSRzAa0yyBK9O4gy8GokU+O0kJOAwiQYg0LP1xNYDW3+0CfBYNb7VOuN4LAGpiOaYUhFDas9F2NPHDELNENJqaHgBgSQJ3ufakfQJqckERcOiK+Ae1FGWBNKGh9oX5WPpLpdNYfffijbsxTHh7VKP7388n1g1h7OKUoUuyGpJakQEuhwkZAKcDXVOdWcrOrL/feBVBHI/q8fcjE1nA9PpyHQ+NJ2Qi8A3AQYAOtS27fCoRY0AAAAASUVORK5CYII=");var V=t.graph.GraphView.prototype,w=V._42;V.adjustHtmlNodeIndex=!0,V._42=function(Y,I){if(w.call(this,Y,I),this.adjustHtmlNodeIndex)for(var h=this.getDataModel()._datas._as,E=h.length,b=1,j=0;E>j;j++){var e=h[j];if(e instanceof H){var K=this.getDataUI(e);U(K.$2f,r,b+""),U(K.$3f,r,b+1+""),b+=2}}};var a=t.HtmlNodeUI=function(m,s){var P=this;a.superClass.constructor.call(P,m,s);var V=P.$2f=X(),r=P.$3f=A();U(V,p,D),U(V,v,k),U(V,C,F),r.draggable=!1,U(r,p,D),U(r,Q,S),I(r,c),n(V,"change",function(p){var j=p.target,y=j.bind||j.getAttribute("bind"),T=j.type&&"checkbox"===j.type?j.checked:j.value,U=s.getContext();y&&U&&(U[y]=T,P.$4f=JSON.stringify(U))}),["mousedown","touchstart","keydown","mousewheel","DOMMouseScroll"].forEach(function(N){n(V,N,this.$9f.bind(this))},P)};P.def(a,f.ui().NodeUI,{_visible:!0,$11f:function(){var X=this,F=X.$3f,$=X._data,q=$.getDraggerImageWidth(),u=$.getDraggerImageHeight(),j=$.getDraggerImage(),g=f.initContext(F);g.beginPath(),f.setCanvas(F,q,u),f.translateAndScale(g,0,0,1),g.clearRect(0,0,q,u),P.drawImage(g,P.getImage(j),0,0,q,u),g.restore()},_80o:function(O){a.superClass._80o.call(this,O);var G=this,t=G._data,z=t._padding,s=2*z,g=G.$2f,h=G.$3f,V=G.gv,W=V.getZoom(),B=V.getTranslateX(),n=V.getTranslateY(),d=V.getView(),l=G._83o,y=t._width,e=t._height,w=l.position,I=l.rotation,H=(y-s)/t.$5f*W,f=(e-s)/t.$6f*W,F=G._html,A=t._html,j=t.getHtmlType();if("html"===j){var C=t.getContext()||{},o=G.$4f,c=t.$10f,Z=JSON.stringify(C);F&&o&&F===A&&o===Z||(G.$4f=Z,G._html=A,g.innerHTML=c?c(C):A)}else if(null!=j){var E=t.getHtml();"ht"===j&&(E=E.getView()),F&&F===E&&g.contains(F)||(G._html=E,g.innerHTML="",u(g,E))}if(!g.parentNode){var Y=V.$1f;if(!Y){var M=X();U(M,p,D),U(M,r,"0"),Y=V.$1f=M;var P=V._canvas.nextSibling;P?d.insertBefore(M,P):u(d,M)}u(Y,g),u(Y,h),t.onContentInitialized&&t.onContentInitialized(g)}if(t._scalable){var N=t.$5f,$=t.$6f;q(g,"rotate("+180*(I/L)+"deg) scale("+H+","+f+")"),U(g,m,""),U(g,_,""),U(g,J,(w.x-N/W/2)*W+B+R),U(g,i,(w.y-$/W/2)*W+n+R)}else{var zb=K(g.style.width),ys=K(g.style.height),As=K((y-s)*W),mo=K((e-s)*W),dn="100%",Kc=g.children[0];U(Kc,m,dn),U(Kc,_,dn),(zb!==As||ys!==mo)&&(U(g,m,As+R),U(g,_,mo+R),"ht"===j&&A.invalidate()),q(g,"rotate("+180*(I/L)+"deg)"),U(g,J,(w.x-As/W/2)*W+B+R),U(g,i,(w.y-mo/W/2)*W+n+R)}var jd=G.dragRect;V.isMovable(t)&&V.isSelected(t)&&jd?(O.save(),O.fillStyle=T,O.fillRect(jd.x,jd.y,jd.width,jd.height),O.restore(),U(h,J,jd.x*W+B+R),U(h,i,jd.y*W+n+R),q(h,"scale("+W+","+W+")"),U(h,Q,b),G.$11f()):U(h,Q,S),U(g,v,this._visible?x:k)},dispose:function(){var y=this.gv.$1f;this.$2f.parentNode===y&&y.removeChild(this.$2f),this.$3f.parentNode===y&&y.removeChild(this.$3f)},_84o:function(K){this._visible=K,U(this.$2f,v,K?x:k),U(this.$3f,Q,K?b:S)},_3O:function(){var c=this,N=c.gv,w=c._data;a.superClass._3O.call(c);var Y=w.getRect();N.isEditable(w)&&(c.dragRect={x:Y.x+Y.width+w._padding,y:Y.y+10,width:w.getDraggerImageWidth(),height:w.getDraggerImageHeight()},c._68o(c.dragRect))},rectIntersects:function(a){var W=this._79o();return t.Default.intersection(W,a)?!0:void 0},$9f:function(R){var l=this.gv,j=this._data;l.sm().contains(j)&&R.stopPropagation()}});var H=t.HtmlNode=function(){H.superClass.constructor.call(this)};t.Default.def(H,t.Node,{ms_ac:["html","context","scalable","padding","draggerImage","draggerImageWidth","draggerImageHeight"],_padding:t.Default.isTouchable?12:6,_image:null,_scalable:!0,_draggerImage:"node_dragger",_draggerImageWidth:20,_draggerImageHeight:20,setHtml:function(J){var g=this,E=g._html;g._html=J,"html"===g.getHtmlType()&&"Handlebars"in y&&(g.$10f=Handlebars.compile(J)),g.$13f(),g.fp("html",E,J)},setContext:function(n){var e=this,Z=e._context;e._context=n,e.fp("context",Z,n),e.$13f()},setScalable:function(x){var C=this,l=C._scalable;C._scalable=x,C.fp("scalable",l,x),C.$13f()},getHtmlType:function(){var X=this._html;return X?"string"==typeof X?"html":X.getView?"ht":"dom":null},$13f:function(){var P=this,i=P._html,_=P.$10f;if(i){var m=X(),d=!1,H=P.getHtmlType();if(U(m,p,D),U(m,C,F),U(m,v,k),"html"===H?(m.innerHTML=_?_(P.getContext()||{}):i,d=!0):"ht"===H?(u(m,i.getView()),d=!0):"dom"===H&&(u(m,i),d=!0),d){var t=2*P._padding;u(z(),m),P.$5f=m.scrollWidth,P.$6f=m.scrollHeight,P._width=P.$5f+t,P._height=P.$6f+t,P._originWidth=P._width,P._originHeight=P._height,$(z(),m)}}},getUIClass:function(){return t.HtmlNodeUI}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);