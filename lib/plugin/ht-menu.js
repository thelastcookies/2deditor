!function(L,F){"use strict";var z="ht",M=L[z],c="innerHTML",U="className",h=null,m="px",E=M.Default,a=E.getInternal(),$="0",O=function(){return document},q=function(s){return O().createElement(s)},G=function(){return q("canvas")},Q=function(O,Q,L){O.style.setProperty(Q,L,h)},I=function(P,V,Z){E.def(M.widget[P],V,Z)},S=function(E,s){E.appendChild(s)},o=function(h,C){h.removeChild(C)},k=a.addEventListener,s=a.removeEventListener,_=E.isTouchable;a.addMethod(E,{menuLabelFont:(_?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),M.widget.Menu=function(C){var w=this,z=w._view=a.createView(null,w),f=w.$1g=new M.widget.ContextMenu,F=q("ul");f._r=!0,f._view[U]+=" ht-widget-dropdownmenu",z[U]="ht-widget-menu",F[U]="header",Q(z,"margin",$),Q(z,"padding",$),Q(z,"background",E.menuBackground),Q(z,"-webkit-user-select","none"),Q(z,"-moz-user-select","none"),Q(z,"user-select","none"),Q(z,"text-align","left"),Q(z,"border-bottom",E.menuSeparatorWidth+"px solid "+E.menuSeparatorColor),Q(z,"cursor","default"),Q(z,"overflow","auto"),Q(z,"white-space","nowrap"),Q(z,"font",E.menuLabelFont),Q(z,"color",E.menuLabelColor),Q(z,"box-sizing","border-box"),Q(z,"-moz-box-sizing","border-box"),Q(F,"list-style","none"),Q(F,"margin",$),Q(F,"padding",$),Q(F,"display","inline-block"),S(z,F),w.setItems(C),w.$2g=function(H){w.$3g(H)},w.$4g=function(Q){w.$5g(Q)},w.$6g=function(v){w.$7g(v)},w.$8g=function(K){w.$9g(K)},w.$9b=function(c){w.$10g(c)},w._autoShow=!0,w.setAutoShow(!1),f.afterHide=function(){w.$11g()},f.afterShow=function(){w.$12g()},s(O(),"keydown",f.$3b),w.$3b=function(y){w.$13g(y)},w.invalidate()},I("Menu",F,{_items:h,$14g:E.menuHoverBackground,$15g:E.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(D){var S=this;if(S.$21g=D,S.setItems(S._items),"largeicons"===D){for(var F=S._view.querySelectorAll(".header-item"),H=0,r=0;r<F.length;r++){var G=F[r];H=Math.max(H,G.clientWidth)}for(var r=0;r<F.length;r++){var G=F[r];Q(G,"min-width",H+m)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(x){this.$22g=x;for(var d=this._view.querySelectorAll(".header-item"),Y=0;Y<d.length;Y++){var f=d[Y];Q(f,"margin-left",x+m),Q(f,"margin-right",x+m)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(a){this.$23g=a;for(var p=this._view.querySelectorAll(".header-item"),_=0;_<p.length;_++){var l=p[_];Q(l,"margin-top",a+m),Q(l,"margin-bottom",a+m)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(H){this.$24g=H,Q(this._view,"text-align",H)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var v=this,Z=v._enableGlobalKey;Z===!1&&(k(O(),"keydown",v.$3b),v._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,s(O(),"keydown",this.$3b)},setHoverBackground:function(j){this.$14g=j},setHoverColor:function(E){this.$15g=E},setItems:function($){var A=this,R=A._view,w=A.$21g;if(A._items=$,R.children[0][c]="",A.$16g={},$&&$.length){for(var C=R.children[0],l=0,s=O().createDocumentFragment();l<$.length;l++){var T=$[l],v=q("li"),h=q("span");if(T.icon){var E=G();E[U]="menu-item-icon","smallicons"===w?(Q(E,"height","1.2em"),Q(E,"width","1.2em"),Q(E,"vertical-align","middle")):(Q(E,"height","32px"),Q(E,"width","32px"),Q(E,"display","block"),Q(E,"margin","0 auto")),E.$20g=T.icon,S(v,E)}v[U]="header-item",Q(v,"display","inline-block"),Q(v,"vertical-align","top"),Q(v,"padding","0 1.2em"),Q(v,"line-height","1.8em"),"largeicons"===w&&Q(v,"text-align","center"),Q(v,"background-color","rgba(0,0,0,0)"),v.setAttribute("data-index",l),A.$16g[l]=T.items,h[c]=T.label,"iconsonly"!==w&&S(v,h),S(s,v)}S(C,s)}},showDropdownMenu:function(v){var s=this,a=s.$16g[v],l=s.$1g,P=s._view.children[0].children[v],p=s.$17g;if(P&&P!==p){p&&s.hideDropdownMenu();var V=P.getBoundingClientRect(),f=E.getWindowInfo();s.$17g=P,l.setItems(a),l.show(V.left+f.left,V.top+V.height+f.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(G,C){var I=this,Q=I._items;return Q&&0!==Q.length?I.$1g.getItemByProperty(G,C,Q):h},$12g:function(){var l=this,o=l.$17g;o.style.background=l.$14g,o.style.color=l.$15g,l._autoShow||k(O(),_?"touchstart":"mousedown",l.$9b)},$11g:function(){var Q=this,T=Q.$17g;T&&(T.style.background="",T.style.color="",Q.$17g=h),s(O(),_?"touchstart":"mousedown",Q.$9b)},$10g:function(s){var o=this,i=o._view,l=o.$1g,m=i.children[0];!O().body.contains(i)||m.contains(s.target)||l._view.contains(s.target)||o.hideDropdownMenu()},$13g:function(y){var S=this,F=S.$1g;O().body.contains(S._view)&&F.$13b.$4b.call(F.$13b,y,S._items)},setAutoShow:function(r){var N=this,K=N.$1g,L=N._view;N._autoShow!==r&&(N._autoShow?(s(L,"mouseover",N.$2g),s(L,"mouseout",N.$4g),s(K._view,"mouseout",N.$4g),_||(k(L,"mouseover",N.$8g),k(L,"mouseout",N.$8g)),k(L,_?"touchstart":"mousedown",N.$6g)):(s(L,"mouseover",N.$8g),s(L,"mouseout",N.$8g),s(L,_?"touchstart":"mousedown",N.$6g),s(O(),_?"touchstart":"mousedown",N.$9b),_||(k(L,"mouseover",N.$2g),k(L,"mouseout",N.$4g),k(K._view,"mouseout",N.$4g))),N._autoShow=r)},$3g:function(k){var S=this,q=S._view.children[0],X=k.target;if(q!==X&&q.contains(X)){for(;"header-item"!==X[U];)X=X.parentNode;S.showDropdownMenu(X.getAttribute("data-index"))}},$5g:function(s){var i=this,p=i._view.children[0],K=i.$1g,X=s.target,Y=s.relatedTarget;!p.contains(X)&&!K._view.contains(X)||p.contains(Y)||K._view.contains(Y)||i.hideDropdownMenu()},$7g:function(p){p.preventDefault();var O=this,i=O._view.children[0],W=O.$1g,h=p.target;if(E.isLeftButton(p)&&i!==h&&i.contains(h))if(_){for(;"header-item"!==h[U];)h=h.parentNode;var b=h.getAttribute("data-index"),W=O.$1g,u=O._view.children[0].children[b],k=O.$17g;W.isShowing()&&O.hideDropdownMenu(),u!==k&&O.showDropdownMenu(b)}else if(W.isShowing())O.hideDropdownMenu();else{for(;"header-item"!==h[U];)h=h.parentNode;O.showDropdownMenu(h.getAttribute("data-index"))}},$9g:function(Z){var I=this,M=I._view,Y=I.$1g,O=Z.target;if(M.contains(O)){for(var f=M.querySelectorAll(".header-item"),q=h,b=0;b<f.length;b++){var S=f[b];S.style.background="",S.style.color="","mouseover"===Z.type?S.contains(O)&&(q=S):"mouseout"===Z.type&&Y.isShowing()&&I.$17g===S&&(q=S)}Y.isShowing()&&(q||(q=I.$17g),I.showDropdownMenu(q.getAttribute("data-index"))),q&&(q.style.background=I.$14g,q.style.color=I.$15g)}},getShowingMenuIndex:function(){var b=this.$17g;return b?b.getAttribute("data-index"):-1},addTo:function(M){var p=this,f=p._view;S(M,f),p.invalidate()},dispose:function(){var L=this,$=L._view,p=L.$1g;$&&(L._autoShow?(s($,"mouseover",L.$2g),s($,"mouseout",L.$4g),s(p._view,"mouseout",L.$4g)):(s($,"mouseover",L.$8g),s($,"mouseout",L.$8g),s($,_?"touchstart":"mousedown",L.$6g),s(O(),_?"touchstart":"mousedown",L.$9b)),s(O(),"keydown",L.$3b),p.dispose(),$.parentNode&&o($.parentNode,$),L._view=L.$1g=L.$16g=L._items=L.$17g=L.$2g=L.$4g=L.$6g=L.$8g=L.$9b=L.$3b=h)},$19g:function(Q,W,_,G){var N=a.initContext(Q);a.translateAndScale(N,0,0,1),N.clearRect(0,0,_,G),E.drawStretchImage(N,E.getImage(W),"fill",0,0,_,G),N.restore()},validateImpl:function(){var h,p,z,M=this,j=M._view,R=j.querySelectorAll(".menu-item-icon");for(z=0;z<R.length;z++){var y=R[z];h=y.clientWidth,p=y.clientHeight,h&&p&&(a.setCanvas(y,h,p),M.$19g(y,E.getImage(y.$20g),h,p))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);