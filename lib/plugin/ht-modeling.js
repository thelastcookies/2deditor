!function(g,P,W){"use strict";var q="ht",V=g[q],$=null,D=Math,t=D.PI,Q=D.cos,r=D.sin,v=D.abs,T=D.max,z=D.sqrt,F=1e-5,M=V.Default,j=M.def,G=M.startAnim,C=M.createMatrix,J=M.transformVec,Z=M.getInternal(),w=Z.addMethod,H=Z.superCall,k=Z.toPointsArray,Y=Z.createNormals,S=Z.toFloatArray,o=Z.glMV,N=(Z.glPop,Z.batchShape),m=Z.createNodeMatrix,L=Z.getFaceInfo,c=Z.transformAppend,h=Z.drawFaceInfo,_=Z.createAnim,A=Z.cube(),f=A.is,b=A.vs,i=A.uv,K=Z.ui(),p=V.Node,X=V.Shape,n="h",l="v",y="front",e="back",I="left",u="right",R="top",d="bottom",E="dw.expanded",O=".expanded",B="dw.angle",s=".angle",x=function(T,B,n){j(q+"."+T,B,n)},a=function($,Q,B){B?$.push(Q.x,Q.y):$.push(Q.x,Q.y,Q.z)},U=[1,0,0],vh=function(D,e,h,c){var i,K,Q,y,u=0,S=[];if(c)for(i=c.length;i>u;u+=3)K=c[u],Q=c[u+1],y=c[u+2],S.push(new Oq([new Ql([e[3*K],e[3*K+1],e[3*K+2]],U,h?[h[2*K],h[2*K+1],0]:$),new Ql([e[3*Q],e[3*Q+1],e[3*Q+2]],U,h?[h[2*Q],h[2*Q+1],0]:$),new Ql([e[3*y],e[3*y+1],e[3*y+2]],U,h?[h[2*y],h[2*y+1],0]:$)],D));else for(i=e.length;i>u;u+=3)K=u,Q=u+1,y=u+2,S.push(new Oq([new Ql([e[3*K],e[3*K+1],e[3*K+2]],U,h?[h[2*K],h[2*K+1],0]:$),new Ql([e[3*Q],e[3*Q+1],e[3*Q+2]],U,h?[h[2*Q],h[2*Q+1],0]:$),new Ql([e[3*y],e[3*y+1],e[3*y+2]],U,h?[h[2*y],h[2*y+1],0]:$)],D));return S},gh=[I,y,u,e,R,d],br=gh.concat("csg"),Oc=[0,6,12,18,24,30],zd=function(a,c,A){var Z=m(a),_=[];a.appendAnchorMatrix3d(Z);for(var T=0;6>T;T++)for(var h=gh[T],s=Oc[T],p=A?c.getFaceUv(a,h):$,g=A?c.getFaceUvScale(a,h):$,M=A?c.getFaceUvOffset(a,h):$,y=0;2>y;y++){var n,L,P,d=f[s+3*y],C=f[s+3*y+1],x=f[s+3*y+2];if(A){if(p){var R=8*T;n=[p[2*d-R],p[2*d+1-R],0],L=[p[2*C-R],p[2*C+1-R],0],P=[p[2*x-R],p[2*x+1-R],0]}else n=[i[2*d],i[2*d+1],0],L=[i[2*C],i[2*C+1],0],P=[i[2*x],i[2*x+1],0];g&&(n[0]*=g[0],n[1]*=g[1],L[0]*=g[0],L[1]*=g[1],P[0]*=g[0],P[1]*=g[1]),M&&(n[0]+=M[0],n[1]+=M[1],L[0]+=M[0],L[1]+=M[1],P[0]+=M[0],P[1]+=M[1])}_.push(new Oq([new Ql(J([b[3*d],b[3*d+1],b[3*d+2]],Z),U,n),new Ql(J([b[3*C],b[3*C+1],b[3*C+2]],Z),U,L),new Ql(J([b[3*x],b[3*x+1],b[3*x+2]],Z),U,P)],a))}return mp.$15n(_)},jg=function(P,M){var b,j=P.data.getAttaches();if(j&&j.each(function(X){X instanceof jc&&X.s("attach.operation")&&(b||(b=[]),b.push(X))}),b){var O;gh.forEach(function(T){var G=vh(T,P[T].vs,P[T].tuv);O=O?O.concat(G):G}),O=mp.$15n(O),b.forEach(function(b){var Y=b.s("attach.operation");O[Y]&&(O=O[Y](zd(b,P.gv,P.csg.tuv)))}),gh.forEach(function(f){f=P[f],f.vs=[],f.tuv&&(f.tuv=[])}),O.$19n().forEach(function(T){var i=T.$10n;if(i instanceof jc){if(i.s("attach.cull"))return;i="csg"}for(var y=P[i],p=y.vs,j=y.tuv,o=T.$9n,d=2;d<o.length;d++)a(p,o[0].$24n),a(p,o[d-1].$24n),a(p,o[d].$24n),j&&(a(j,o[0].uv,!0),a(j,o[d-1].uv,!0),a(j,o[d].uv,!0))})}br.forEach(function(r){var A=P[r];A.visible&&A.vs.length?(A.ns=Y(A.vs),S(A,"vs"),S(A,"tuv")):delete P[r]}),M&&(N(P,$,M),P.clear())};w(M,{createFrameModel:function(s,Z,h,I){s=s==$?.07:s,Z=Z==$?s:Z,h=h==$?s:h,I=I?I:{};var K=I.top,y=I.bottom,t=I.left,v=I.right,A=I.front,M=I.back,R=[],x=[];return A===!0?(R.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),x.push(0,0,0,1,1,1,1,1,1,0,0,0)):A===!1||(R.push(-.5,.5,.5,-.5,-.5,.5,-.5+s,-.5,.5,-.5+s,-.5,.5,-.5+s,.5,.5,-.5,.5,.5,.5-s,.5,.5,.5-s,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-s,.5,.5,-.5+s,.5,.5,-.5+s,.5-Z,.5,.5-s,.5-Z,.5,.5-s,.5-Z,.5,.5-s,.5,.5,-.5+s,.5,.5,-.5+s,-.5+Z,.5,-.5+s,-.5,.5,.5-s,-.5,.5,.5-s,-.5,.5,.5-s,-.5+Z,.5,-.5+s,-.5+Z,.5),x.push(0,0,0,1,s,1,s,1,s,0,0,0,1-s,0,1-s,1,1,1,1,1,1,0,1-s,0,s,0,s,Z,1-s,Z,1-s,Z,1-s,0,s,0,s,1-Z,s,1,1-s,1,1-s,1,1-s,1-Z,s,1-Z)),M===!0?(R.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),x.push(1,0,0,1,1,1,0,1,1,0,0,0)):M===!1||(R.push(-.5,.5,-.5,-.5+s,-.5,-.5,-.5,-.5,-.5,-.5+s,-.5,-.5,-.5,.5,-.5,-.5+s,.5,-.5,.5-s,.5,-.5,.5,-.5,-.5,.5-s,-.5,-.5,.5,-.5,-.5,.5-s,.5,-.5,.5,.5,-.5,-.5+s,.5,-.5,.5-s,.5-Z,-.5,-.5+s,.5-Z,-.5,.5-s,.5-Z,-.5,-.5+s,.5,-.5,.5-s,.5,-.5,-.5+s,-.5+Z,-.5,.5-s,-.5,-.5,-.5+s,-.5,-.5,.5-s,-.5,-.5,-.5+s,-.5+Z,-.5,.5-s,-.5+Z,-.5),x.push(1,0,1-s,1,1,1,1-s,1,1,0,1-s,0,s,0,0,1,s,1,0,1,s,0,0,0,1-s,0,s,Z,1-s,Z,s,Z,1-s,0,s,0,1-s,1-Z,s,1,1-s,1,s,1,1-s,1-Z,s,1-Z)),t===!0?(R.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),x.push(0,0,0,1,1,1,1,1,1,0,0,0)):t===!1||(R.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+h,-.5,-.5,-.5+h,-.5,.5,-.5+h,-.5,.5,-.5,-.5,.5,.5-h,-.5,-.5,.5-h,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-h,-.5,.5,-.5+h,-.5,.5-Z,-.5+h,-.5,.5-Z,.5-h,-.5,.5-Z,.5-h,-.5,.5,.5-h,-.5,.5,-.5+h,-.5,-.5+Z,-.5+h,-.5,-.5,-.5+h,-.5,-.5,.5-h,-.5,-.5,.5-h,-.5,-.5+Z,.5-h,-.5,-.5+Z,-.5+h),x.push(0,0,0,1,h,1,h,1,h,0,0,0,1-h,0,1-h,1,1,1,1,1,1,0,1-h,0,h,0,h,Z,1-h,Z,1-h,Z,1-h,0,h,0,h,1-Z,h,1,1-h,1,1-h,1,1-h,1-Z,h,1-Z)),v===!0?(R.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),x.push(1,0,0,1,1,1,0,1,1,0,0,0)):v===!1||(R.push(.5,.5,-.5,.5,-.5,-.5+h,.5,-.5,-.5,.5,-.5,-.5+h,.5,.5,-.5,.5,.5,-.5+h,.5,.5,.5-h,.5,-.5,.5,.5,-.5,.5-h,.5,-.5,.5,.5,.5,.5-h,.5,.5,.5,.5,.5,-.5+h,.5,.5-Z,.5-h,.5,.5-Z,-.5+h,.5,.5-Z,.5-h,.5,.5,-.5+h,.5,.5,.5-h,.5,-.5+Z,-.5+h,.5,-.5,.5-h,.5,-.5,-.5+h,.5,-.5,.5-h,.5,-.5+Z,-.5+h,.5,-.5+Z,.5-h),x.push(1,0,1-h,1,1,1,1-h,1,1,0,1-h,0,h,0,0,1,h,1,0,1,h,0,0,0,1-h,0,h,Z,1-h,Z,h,Z,1-h,0,h,0,1-h,1-Z,h,1,1-h,1,h,1,1-h,1-Z,h,1-Z)),K===!0?(R.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),x.push(1,1,1,0,0,0,0,0,0,1,1,1)):K===!1||(R.push(.5,.5,.5,.5,.5,-.5,.5-s,.5,-.5,.5-s,.5,-.5,.5-s,.5,.5,.5,.5,.5,-.5+s,.5,.5,-.5+s,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+s,.5,.5,.5-s,.5,.5,.5-s,.5,.5-h,-.5+s,.5,.5-h,-.5+s,.5,.5-h,-.5+s,.5,.5,.5-s,.5,.5,.5-s,.5,-.5+h,.5-s,.5,-.5,-.5+s,.5,-.5,-.5+s,.5,-.5,-.5+s,.5,-.5+h,.5-s,.5,-.5+h),x.push(1,1,1,0,1-s,0,1-s,0,1-s,1,1,1,s,1,s,0,0,0,0,0,0,1,s,1,1-s,1,1-s,1-h,s,1-h,s,1-h,s,1,1-s,1,1-s,h,1-s,0,s,0,s,0,s,h,1-s,h)),y===!0?(R.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),x.push(1,0,0,1,1,1,0,1,1,0,0,0)):y===!1||(R.push(.5,-.5,.5,.5-s,-.5,-.5,.5,-.5,-.5,.5-s,-.5,-.5,.5,-.5,.5,.5-s,-.5,.5,-.5+s,-.5,.5,-.5,-.5,-.5,-.5+s,-.5,-.5,-.5,-.5,-.5,-.5+s,-.5,.5,-.5,-.5,.5,.5-s,-.5,.5,-.5+s,-.5,.5-h,.5-s,-.5,.5-h,-.5+s,-.5,.5-h,.5-s,-.5,.5,-.5+s,-.5,.5,.5-s,-.5,-.5+h,-.5+s,-.5,-.5,.5-s,-.5,-.5,-.5+s,-.5,-.5,.5-s,-.5,-.5+h,-.5+s,-.5,-.5+h),x.push(1,0,1-s,1,1,1,1-s,1,1,0,1-s,0,s,0,0,1,s,1,0,1,s,0,0,0,1-s,0,s,h,1-s,h,s,h,1-s,0,s,0,1-s,1-h,s,1,1-s,1,s,1,1-s,1-h,s,1-h)),{vs:R,uv:x}}}),w(V.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":W,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":t/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),gh.forEach(function(_){var q={};q[_+O]=!1,q[_+".toggleable"]=!1,q[_+".axis"]=I,q[_+".start"]=0,q[_+".end"]=t/2,q[_+s]=0,w(V.Style,q,!0)});var mp=function(){this.$4n=[]};mp.$15n=function(y){var W=new mp;return W.$4n=y,W},mp.prototype={clone:function(){var r=new mp;return r.$4n=this.$4n.map(function(w){return w.clone()}),r},$19n:function(){return this.$4n},union:function(J){var n=new Ci(this.clone().$4n),W=new Ci(J.clone().$4n);return n.$3n(W),W.$3n(n),W.$6n(),W.$3n(n),W.$6n(),n.$7n(W.$2n()),mp.$15n(n.$2n())},subtract:function(F){var G=new Ci(this.clone().$4n),h=new Ci(F.clone().$4n);return G.$6n(),G.$3n(h),h.$3n(G),h.$6n(),h.$3n(G),h.$6n(),G.$7n(h.$2n()),G.$6n(),mp.$15n(G.$2n())},intersect:function(w){var v=new Ci(this.clone().$4n),i=new Ci(w.clone().$4n);return v.$6n(),i.$3n(v),i.$6n(),v.$3n(i),i.$3n(v),v.$7n(i.$2n()),v.$6n(),mp.$15n(v.$2n())},inverse:function(){var $=this.clone();return $.$4n.map(function(V){V.flip()}),$}},mp.cube=function(t){t=t||{};var w=new oi(t.center||[0,0,0]),u=t.radius?t.radius.length?t.radius:[t.radius,t.radius,t.radius]:[1,1,1];return mp.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(i){return new Oq(i[0].map(function(L){var K=new oi(w.x+u[0]*(2*!!(1&L)-1),w.y+u[1]*(2*!!(2&L)-1),w.z+u[2]*(2*!!(4&L)-1));return new Ql(K,new oi(i[1]))}))}))},mp.sphere=function(Z){function $(Y,W){Y*=2*t,W*=t;var h=new oi(Q(Y)*r(W),Q(W),r(Y)*r(W));q.push(new Ql(p.$20n(h.$21n(O)),h))}Z=Z||{};for(var q,p=new oi(Z.center||[0,0,0]),O=Z.radius||1,v=Z.slices||16,W=Z.stacks||8,H=[],w=0;v>w;w++)for(var m=0;W>m;m++)q=[],$(w/v,m/W),m>0&&$((w+1)/v,m/W),W-1>m&&$((w+1)/v,(m+1)/W),$(w/v,(m+1)/W),H.push(new Oq(q));return mp.$15n(H)},mp.cylinder=function(x){function a(U,p,M){var a=2*p*t,$=u.$21n(Q(a)).$20n(A.$21n(r(a))),g=s.$20n(o.$21n(U)).$20n($.$21n(F)),C=$.$21n(1-v(M)).$20n(J.$21n(M));return new Ql(g,C)}x=x||{};for(var s=new oi(x.start||[0,-1,0]),E=new oi(x.end||[0,1,0]),o=E.$13n(s),F=x.radius||1,j=x.slices||16,J=o.$14n(),I=v(J.y)>.5,u=new oi(I,!I,0).$12n(J).$14n(),A=u.$12n(J).$14n(),W=new Ql(s,J.$11n()),N=new Ql(E,J.$14n()),h=[],$=0;j>$;$++){var i=$/j,g=($+1)/j;h.push(new Oq([W,a(0,i,-1),a(0,g,-1)])),h.push(new Oq([a(0,g,0),a(0,i,0),a(1,i,0),a(1,g,0)])),h.push(new Oq([N,a(1,g,1),a(1,i,1)]))}return mp.$15n(h)};var oi=function(J,N,w){var P=this;3==arguments.length?(P.x=J,P.y=N,P.z=w):"x"in J?(P.x=J.x,P.y=J.y,P.z=J.z):(P.x=J[0],P.y=J[1],P.z=J[2])};oi.prototype={clone:function(){return new oi(this.x,this.y,this.z)},$11n:function(){return new oi(-this.x,-this.y,-this.z)},$20n:function(o){return new oi(this.x+o.x,this.y+o.y,this.z+o.z)},$13n:function(O){return new oi(this.x-O.x,this.y-O.y,this.z-O.z)},$21n:function(N){return new oi(this.x*N,this.y*N,this.z*N)},$16n:function(G){return new oi(this.x/G,this.y/G,this.z/G)},$23n:function(o){return this.x*o.x+this.y*o.y+this.z*o.z},lerp:function(x,b){return this.$20n(x.$13n(this).$21n(b))},length:function(){return z(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(O){var f=this;return new oi(f.y*O.z-f.z*O.y,f.z*O.x-f.x*O.z,f.x*O.y-f.y*O.x)}};var Ql=function(j,h,E){var m=this;m.$24n=new oi(j),m.$22n=new oi(h),m.uv=E?new oi(E):null};Ql.prototype={clone:function(){var W=this;return new Ql(W.$24n.clone(),W.$22n.clone(),W.uv?W.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(W,B){var h=this;return new Ql(h.$24n.lerp(W.$24n,B),h.$22n.lerp(W.$22n,B),h.uv?h.uv.lerp(W.uv,B):null)}};var li=function(B,p){this.$22n=B,this.w=p};li.$17n=function(w,g,L){var x=g.$13n(w).$12n(L.$13n(w)).$14n();return new li(x,x.$23n(w))},li.prototype={clone:function(){return new li(this.$22n.clone(),this.w)},flip:function(){var s=this;s.$22n=s.$22n.$11n(),s.w=-s.w},$5n:function(C,l,E,U,P){for(var K=this,u=0,$=1,D=2,m=3,Y=0,Z=[],J=0;J<C.$9n.length;J++){var O=K.$22n.$23n(C.$9n[J].$24n)-K.w,Q=-F>O?D:O>F?$:u;Y|=Q,Z.push(Q)}switch(Y){case u:(K.$22n.$23n(C.$8n.$22n)>0?l:E).push(C);break;case $:U.push(C);break;case D:P.push(C);break;case m:for(var a=[],i=[],J=0;J<C.$9n.length;J++){var v=(J+1)%C.$9n.length,V=Z[J],B=Z[v],T=C.$9n[J],M=C.$9n[v];if(V!=D&&a.push(T),V!=$&&i.push(V!=D?T.clone():T),(V|B)==m){var O=(K.w-this.$22n.$23n(T.$24n))/K.$22n.$23n(M.$24n.$13n(T.$24n)),c=T.$18n(M,O);a.push(c),i.push(c.clone())}}a.length>=3&&U.push(new Oq(a,C.$10n)),i.length>=3&&P.push(new Oq(i,C.$10n))}}};var Oq=function(J,i){var t=this;t.$9n=J,t.$10n=i,t.$8n=li.$17n(J[0].$24n,J[1].$24n,J[2].$24n)};Oq.prototype={clone:function(){var A=this.$9n.map(function(o){return o.clone()});return new Oq(A,this.$10n)},flip:function(){this.$9n.reverse().map(function(b){b.flip()}),this.$8n.flip()}};var Ci=function(m){var J=this;J.$8n=null,J.front=null,J.back=null,J.$4n=[],m&&J.$7n(m)};Ci.prototype={clone:function(){var W=this,v=new Ci;return v.$8n=W.$8n&&W.$8n.clone(),v.front=W.front&&W.front.clone(),v.back=W.back&&W.back.clone(),v.$4n=W.$4n.map(function(r){return r.clone()}),v},$6n:function(){for(var j=this,I=0;I<j.$4n.length;I++)j.$4n[I].flip();j.$8n&&j.$8n.flip(),j.front&&j.front.$6n(),j.back&&j.back.$6n();var d=j.front;j.front=j.back,j.back=d},$1n:function(L){var e=this;if(!e.$8n)return L.slice();for(var n=[],q=[],H=0;H<L.length;H++)e.$8n.$5n(L[H],n,q,n,q);return e.front&&(n=e.front.$1n(n)),q=e.back?e.back.$1n(q):[],n.concat(q)},$3n:function(V){var S=this;S.$4n=V.$1n(S.$4n),S.front&&S.front.$3n(V),S.back&&S.back.$3n(V)},$2n:function(){var t=this,$=t.$4n.slice();return t.front&&($=$.concat(t.front.$2n())),t.back&&($=$.concat(t.back.$2n())),$},$7n:function(w){var H=this;if(w.length){H.$8n||(H.$8n=w[0].$8n.clone());for(var F=[],T=[],t=0;t<w.length;t++)this.$8n.$5n(w[t],H.$4n,H.$4n,F,T);F.length&&(H.front||(H.front=new Ci),this.front.$7n(F)),T.length&&(H.back||(H.back=new Ci),H.back.$7n(T))}}};var hs="symbol",Jf=V.Symbol=function(l,b,r){var D=this;H(Jf,D),D.s3(20,20,20),D.s({"all.visible":!1,shape:"rect"}),D.setIcon(l,b,r)};x("Symbol",p,{setIcon:function(h,O,J){var d,N=this;return Jf.superClass.setIcon.call(N,h),h?(d={for3d:!0,face:"center",position:44,names:[h]},J&&(d.transaprent=!0),O&&(d.autorotate=O),N.addStyleIcon(hs,d)):N.removeStyleIcon(hs),N.setWidth(Z.getImageWidth(M.getImage(h),N)||20),d}});var jc=V.CSGNode=function(){H(jc,this),this.s({shape:"rect","attach.thickness":1.001,"2d.attachable":!0})},Ae={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,anchor:1,anchorElevation:1,"s:attach.cull":1,"s:attach.operation":1};x("CSGNode",p,{_22Q:function(){return Sl},onPropertyChanged:function(z){var l=this,F=l.getHost();jc.superClass.onPropertyChanged.call(l,z),Ae[z.property]&&(F instanceof Ff||F instanceof jc)&&F.fp("csgNodeChange",!0,!1)}});var Sl=function(j,K){H(Sl,this,[j,K])};j(Sl,K.Node3dUI,{_80o:function(X,L,j){var q=this;q._shape3d?Sl.superClass._80o.call(q,X,L,j):(o(q.gv),br.forEach(function(Z){h(q,X,L,Z,j)}))},validate:function(w,y){var Y=this,h=Y.gv,g=Y.data;if(g.s("shape3d"))return Sl.superClass.validate.call(Y,w,y),Y._shape3d=!0,void 0;Y._shape3d=!1;var t=m(g,h.getMat(g));g.appendAnchorMatrix3d(t);var G=w&&w.uv;Y.vf2("csg",G);for(var L=0;6>L;L++)for(var A=gh[L],R=Oc[L],n=Y.vf2(A,G,y),s=n.mat||t,k=n.vs,T=n.uv,p=n.tuv,u=0;2>u;u++){var d=f[R+3*u],C=f[R+3*u+1],Q=f[R+3*u+2];if(c(k,s,[b[3*d],b[3*d+1],b[3*d+2]]),c(k,s,[b[3*C],b[3*C+1],b[3*C+2]]),c(k,s,[b[3*Q],b[3*Q+1],b[3*Q+2]]),p)if(T){var e=8*L;p.push(T[2*d-e],T[2*d+1-e],T[2*C-e],T[2*C+1-e],T[2*Q-e],T[2*Q+1-e])}else p.push(i[2*d],i[2*d+1],i[2*C],i[2*C+1],i[2*Q],i[2*Q+1])}jg(Y,w,y)},vf2:function(t,T,Y){var c,O=this,M=O.gv.getFaceVisible(O.data,t);return c=L(O,t,Y),c.vs=[],c.tuv=M&&(c.texture||T)?[]:$,c.visible=M,c}});var Ff=V.CSGShape=function(){var o=this;H(Ff,o),o.s({"shape.background":$,"2d.hostable":!0,"shape.border.width":8}),o.setTall(240),o.setElevation(120),o.setThickness(14)};x("CSGShape",X,{IRotatable:!1,_22Q:function(){return Vk},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var Vk=function(n,y){H(Vk,this,[n,y])};j(Vk,K.Shape3dUI,{_80o:function(Q,x,I){var S=this;S.undrawable||(o(S.gv),br.forEach(function(Z){h(S,Q,x,Z,I)}))},validate:function(j,g){var N=this,t=N.data,f=t.getPoints();if(N.undrawable=f.size()<2)return N.clear(),void 0;var d=t.isClosePath(),X=T(t._thickness/2,F),w=k(f,$,$,d);br.forEach(function(c){N.vf(c,j&&j.uv,!0,g)}),d&&(N.left.visible=!1,N.right.visible=!1),N._12O(w,X),N._20Q(w);var U=t.getPointsMatrix3d(),R=V.Math.requestVector3();gh.forEach(function(j){if(N[j])for(var r=N[j].vs,g=0,h=r.length;h>g;g+=3)R.set(r[g],r[g+1],r[g+2]).applyMatrix4(U),r[g]=R.x,r[g+1]=R.y,r[g+2]=R.z}),V.Math.releaseVector3(R),jg(N,j,g)}});var Kk=V.DoorWindow=function(){var m=this;H(Kk,m),m.setElevation(100),m.s3(100,200,14)};x("DoorWindow",jc,{IDoorWindow:!0,toggle:function(k){this.setExpanded(!this.s(E),k)},isExpanded:function(){return this.s(E)},setExpanded:function(L,h){var g=this,$=g.$25n,y=g.getDataModel(),X=g.s(E);if($&&($.stop(!0),delete g.$25n),X!==L){y&&y.beginTransaction();var D=L?g.s("dw.end"):g.s("dw.start");g.s(E,L),h=_(h),h?(X=g.s(B),h.action=function(c){g.s(B,X+(D-X)*c)},h.finishFunc=function(){y&&y.endTransaction()},g.$25n=G(h)):(g.s(B,D),y&&y.endTransaction())}},getMat:function(){var N=this,V=N.s("dw.s3"),c=N.s("dw.t3"),F=N.s("dw.flip"),m=N.s(B);if(V||m||c||F){var E=[];if(F&&E.push({r3:[0,t,0]}),V&&E.push({s3:V}),m){V=N.getFinalScale3d();var h=N.s("dw.axis"),D=V[0]/2,J=V[1]/2;V[2]/2,h===I?E.push({t3:[D,0,0]},{r3:[0,-m,0]},{t3:[-D,0,0]}):h===u?E.push({t3:[-D,0,0]},{r3:[0,m,0]},{t3:[D,0,0]}):h===R?E.push({t3:[0,-J,0]},{r3:[-m,0,0]},{t3:[0,J,0]}):h===d?E.push({t3:[0,J,0]},{r3:[m,0,0]},{t3:[0,-J,0]}):h===l?E.push({r3:[0,m,0]}):h===n&&E.push({r3:[m,0,0]})}return c&&E.push({t3:c}),C(E)}return $}});var Th=V.CSGBox=function(){var K=this;H(Th,K),K.setElevation(100),K.s3(100,200,100)};x("CSGBox",jc,{ICSGBox:!0,toggleFace:function(a,D){this.setFaceExpanded(a,!this.s(a+O),D)},isFaceExpanded:function(I){return this.s(I+O)},setFaceExpanded:function(u,j,c){var m=this,M=m.$25n,d=m.s(u+O);if(M&&(M.stop(!0),delete m.$25n),d!==j){var z=j?m.s(u+".end"):m.s(u+".start");m.s(u+O,j),c=_(c),c?(d=m.s(u+s),c.action=function(Q){m.s(u+s,d+(z-d)*Q)},m.$25n=G(c)):m.s(u+s,z)}},getFaceMat:function(_){var U=this,u=U.s(_+s);if(!u)return $;var Y,O,r,A,W,H,o=U.s(_+".axis"),w=U.getFinalScale3d(),V=U.getAnchor3d(),f=w[0]*V.x,l=w[1]*V.y,h=w[2]*V.z,J=w[0]-f,d=w[1]-l,j=w[2]-h,c=_+"_"+o;switch(c){case"front_left":Y=-f,O=0,r=j,A=0,W=-u,H=0;break;case"front_right":Y=J,O=0,r=j,A=0,W=u,H=0;break;case"front_top":Y=0,O=d,r=j,A=-u,W=0,H=0;break;case"front_bottom":Y=0,O=-l,r=j,A=u,W=0,H=0;break;case"front_h":Y=0,O=0,r=j,A=u,W=0,H=0;break;case"front_v":Y=0,O=0,r=j,A=0,W=u,H=0;break;case"back_left":Y=J,O=0,r=-h,A=0,W=-u,H=0;break;case"back_right":Y=-f,O=0,r=-h,A=0,W=u,H=0;break;case"back_top":Y=0,O=d,r=-h,A=u,W=0,H=0;break;case"back_bottom":Y=0,O=-l,r=-h,A=-u,W=0,H=0;break;case"back_h":Y=0,O=0,r=-h,A=u,W=0,H=0;break;case"back_v":Y=0,O=0,r=-h,A=0,W=u,H=0;break;case"left_left":Y=-f,O=0,r=-h,A=0,W=-u,H=0;break;case"left_right":Y=-f,O=0,r=j,A=0,W=u,H=0;break;case"left_top":Y=-f,O=d,r=0,A=0,W=0,H=-u;break;case"left_bottom":Y=-f,O=-l,r=0,A=0,W=0,H=u;break;case"left_h":Y=-f,O=0,r=0,A=0,W=0,H=u;break;case"left_v":Y=-f,O=0,r=0,A=0,W=u,H=0;break;case"right_left":Y=J,O=0,r=j,A=0,W=-u,H=0;break;case"right_right":Y=J,O=0,r=-h,A=0,W=u,H=0;break;case"right_top":Y=J,O=d,r=0,A=0,W=0,H=u;break;case"right_bottom":Y=J,O=-l,r=0,A=0,W=0,H=-u;break;case"right_h":Y=J,O=0,r=0,A=0,W=0,H=u;break;case"right_v":Y=J,O=0,r=0,A=0,W=u,H=0;break;case"top_left":Y=-f,O=d,r=0,A=0,W=0,H=u;break;case"top_right":Y=J,O=d,r=0,A=0,W=0,H=-u;break;case"top_top":Y=0,O=d,r=-h,A=-u,W=0,H=0;break;case"top_bottom":Y=0,O=d,r=j,A=u,W=0,H=0;break;case"top_h":Y=0,O=d,r=0,A=u,W=0,H=0;break;case"top_v":Y=0,O=d,r=0,A=0,W=0,H=u;break;case"bottom_left":Y=-f,O=-l,r=0,A=0,W=0,H=-u;break;case"bottom_right":Y=J,O=-l,r=0,A=0,W=0,H=u;break;case"bottom_top":Y=0,O=-l,r=j,A=-u,W=0,H=0;break;case"bottom_bottom":Y=0,O=-l,r=-h,A=u,W=0,H=0;break;case"bottom_h":Y=0,O=-l,r=0,A=u,W=0,H=0;break;case"bottom_v":Y=0,O=-l,r=0,A=0,W=0,H=u}return C([{t3:[-Y,-O,-r]},{r3:[A,W,H]},{t3:[Y,O,r]}])}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);