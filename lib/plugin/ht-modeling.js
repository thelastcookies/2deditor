!function(B,M,U){"use strict";var N="ht",$=B[N],Z=null,O=Math,c=O.PI,t=O.cos,i=O.sin,P=O.abs,z=O.max,n=O.sqrt,G=1e-5,E=$.Default,v=E.def,R=E.startAnim,o=E.createMatrix,K=E.transformVec,e=E.getInternal(),S=e.addMethod,l=e.superCall,p=e.toPointsArray,m=e.createNormals,T=e.toFloatArray,u=e.glMV,q=e.batchShape,D=e.createNodeMatrix,J=e.getFaceInfo,g=e.transformAppend,V=e.drawFaceInfo,Q=e.createAnim,x=e.cube(),X=x.is,Y=x.vs,A=x.uv,b=e.ui(),I=$.Node,f=$.Shape,F="h",W="v",s="front",H="back",C="left",a="right",d="top",r="bottom",j="dw.expanded",w=".expanded",y="dw.angle",_=".angle",k=function(K,r,s){v(N+"."+K,r,s)},h=function(U,q,L){L?U.push(q.x,q.y):U.push(q.x,q.y,q.z)},L=[1,0,0],Br=function(g,_,k,o){var t,T,U,S,w=0,l=[];if(o)for(t=o.length;t>w;w+=3)T=o[w],U=o[w+1],S=o[w+2],l.push(new Xh([new ph([_[3*T],_[3*T+1],_[3*T+2]],L,k?[k[2*T],k[2*T+1],0]:Z),new ph([_[3*U],_[3*U+1],_[3*U+2]],L,k?[k[2*U],k[2*U+1],0]:Z),new ph([_[3*S],_[3*S+1],_[3*S+2]],L,k?[k[2*S],k[2*S+1],0]:Z)],g));else for(t=_.length;t>w;w+=3)T=w,U=w+1,S=w+2,l.push(new Xh([new ph([_[3*T],_[3*T+1],_[3*T+2]],L,k?[k[2*T],k[2*T+1],0]:Z),new ph([_[3*U],_[3*U+1],_[3*U+2]],L,k?[k[2*U],k[2*U+1],0]:Z),new ph([_[3*S],_[3*S+1],_[3*S+2]],L,k?[k[2*S],k[2*S+1],0]:Z)],g));return l},Kn=[C,s,a,H,d,r],Sl=Kn.concat("csg"),oi=[0,6,12,18,24,30],rj=function(P,S,U){for(var V=D(P),J=[],p=0;6>p;p++)for(var h=Kn[p],l=oi[p],k=U?S.getFaceUv(P,h):Z,i=U?S.getFaceUvScale(P,h):Z,v=U?S.getFaceUvOffset(P,h):Z,R=0;2>R;R++){var N,H,E,B=X[l+3*R],b=X[l+3*R+1],j=X[l+3*R+2];if(U){if(k){var x=8*p;N=[k[2*B-x],k[2*B+1-x],0],H=[k[2*b-x],k[2*b+1-x],0],E=[k[2*j-x],k[2*j+1-x],0]}else N=[A[2*B],A[2*B+1],0],H=[A[2*b],A[2*b+1],0],E=[A[2*j],A[2*j+1],0];i&&(N[0]*=i[0],N[1]*=i[1],H[0]*=i[0],H[1]*=i[1],E[0]*=i[0],E[1]*=i[1]),v&&(N[0]+=v[0],N[1]+=v[1],H[0]+=v[0],H[1]+=v[1],E[0]+=v[0],E[1]+=v[1])}J.push(new Xh([new ph(K([Y[3*B],Y[3*B+1],Y[3*B+2]],V),L,N),new ph(K([Y[3*b],Y[3*b+1],Y[3*b+2]],V),L,H),new ph(K([Y[3*j],Y[3*j+1],Y[3*j+2]],V),L,E)],P))}return Jn.$15n(J)},Eb=function(E,U){var c,K=E.data.getAttaches();if(K&&K.each(function(G){G instanceof xs&&G.s("attach.operation")&&(c||(c=[]),c.push(G))}),c){var z;Kn.forEach(function(x){var D=Br(x,E[x].vs,E[x].tuv);z=z?z.concat(D):D}),z=Jn.$15n(z),c.forEach(function(J){var Z=J.s("attach.operation");z[Z]&&(z=z[Z](rj(J,E.gv,E.csg.tuv)))}),Kn.forEach(function(v){v=E[v],v.vs=[],v.tuv&&(v.tuv=[])}),z.$19n().forEach(function(z){var y=z.$10n;if(y instanceof xs){if(y.s("attach.cull"))return;y="csg"}for(var B=E[y],T=B.vs,F=B.tuv,d=z.$9n,Q=2;Q<d.length;Q++)h(T,d[0].$24n),h(T,d[Q-1].$24n),h(T,d[Q].$24n),F&&(h(F,d[0].uv,!0),h(F,d[Q-1].uv,!0),h(F,d[Q].uv,!0))})}Sl.forEach(function(B){var q=E[B];q.visible&&q.vs.length?(q.ns=m(q.vs),T(q,"vs"),T(q,"tuv")):delete E[B]}),U&&(q(E,Z,U),E.clear())};S(E,{createFrameModel:function(N,y,E,D){N=N==Z?.07:N,y=y==Z?N:y,E=E==Z?N:E,D=D?D:{};var g=D.top,r=D.bottom,l=D.left,j=D.right,o=D.front,J=D.back,w=[],z=[];return o===!0?(w.push(-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5),z.push(0,0,0,1,1,1,1,1,1,0,0,0)):o===!1||(w.push(-.5,.5,.5,-.5,-.5,.5,-.5+N,-.5,.5,-.5+N,-.5,.5,-.5+N,.5,.5,-.5,.5,.5,.5-N,.5,.5,.5-N,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5-N,.5,.5,-.5+N,.5,.5,-.5+N,.5-y,.5,.5-N,.5-y,.5,.5-N,.5-y,.5,.5-N,.5,.5,-.5+N,.5,.5,-.5+N,-.5+y,.5,-.5+N,-.5,.5,.5-N,-.5,.5,.5-N,-.5,.5,.5-N,-.5+y,.5,-.5+N,-.5+y,.5),z.push(0,0,0,1,N,1,N,1,N,0,0,0,1-N,0,1-N,1,1,1,1,1,1,0,1-N,0,N,0,N,y,1-N,y,1-N,y,1-N,0,N,0,N,1-y,N,1,1-N,1,1-N,1,1-N,1-y,N,1-y)),J===!0?(w.push(-.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5),z.push(1,0,0,1,1,1,0,1,1,0,0,0)):J===!1||(w.push(-.5,.5,-.5,-.5+N,-.5,-.5,-.5,-.5,-.5,-.5+N,-.5,-.5,-.5,.5,-.5,-.5+N,.5,-.5,.5-N,.5,-.5,.5,-.5,-.5,.5-N,-.5,-.5,.5,-.5,-.5,.5-N,.5,-.5,.5,.5,-.5,-.5+N,.5,-.5,.5-N,.5-y,-.5,-.5+N,.5-y,-.5,.5-N,.5-y,-.5,-.5+N,.5,-.5,.5-N,.5,-.5,-.5+N,-.5+y,-.5,.5-N,-.5,-.5,-.5+N,-.5,-.5,.5-N,-.5,-.5,-.5+N,-.5+y,-.5,.5-N,-.5+y,-.5),z.push(1,0,1-N,1,1,1,1-N,1,1,0,1-N,0,N,0,0,1,N,1,0,1,N,0,0,0,1-N,0,N,y,1-N,y,N,y,1-N,0,N,0,1-N,1-y,N,1,1-N,1,N,1,1-N,1-y,N,1-y)),l===!0?(w.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,-.5),z.push(0,0,0,1,1,1,1,1,1,0,0,0)):l===!1||(w.push(-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5+E,-.5,-.5,-.5+E,-.5,.5,-.5+E,-.5,.5,-.5,-.5,.5,.5-E,-.5,-.5,.5-E,-.5,-.5,.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5-E,-.5,.5,-.5+E,-.5,.5-y,-.5+E,-.5,.5-y,.5-E,-.5,.5-y,.5-E,-.5,.5,.5-E,-.5,.5,-.5+E,-.5,-.5+y,-.5+E,-.5,-.5,-.5+E,-.5,-.5,.5-E,-.5,-.5,.5-E,-.5,-.5+y,.5-E,-.5,-.5+y,-.5+E),z.push(0,0,0,1,E,1,E,1,E,0,0,0,1-E,0,1-E,1,1,1,1,1,1,0,1-E,0,E,0,E,y,1-E,y,1-E,y,1-E,0,E,0,E,1-y,E,1,1-E,1,1-E,1,1-E,1-y,E,1-y)),j===!0?(w.push(.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,-.5,.5,.5,.5),z.push(1,0,0,1,1,1,0,1,1,0,0,0)):j===!1||(w.push(.5,.5,-.5,.5,-.5,-.5+E,.5,-.5,-.5,.5,-.5,-.5+E,.5,.5,-.5,.5,.5,-.5+E,.5,.5,.5-E,.5,-.5,.5,.5,-.5,.5-E,.5,-.5,.5,.5,.5,.5-E,.5,.5,.5,.5,.5,-.5+E,.5,.5-y,.5-E,.5,.5-y,-.5+E,.5,.5-y,.5-E,.5,.5,-.5+E,.5,.5,.5-E,.5,-.5+y,-.5+E,.5,-.5,.5-E,.5,-.5,-.5+E,.5,-.5,.5-E,.5,-.5+y,-.5+E,.5,-.5+y,.5-E),z.push(1,0,1-E,1,1,1,1-E,1,1,0,1-E,0,E,0,0,1,E,1,0,1,E,0,0,0,1-E,0,E,y,1-E,y,E,y,1-E,0,E,0,1-E,1-y,E,1,1-E,1,E,1,1-E,1-y,E,1-y)),g===!0?(w.push(.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5),z.push(1,1,1,0,0,0,0,0,0,1,1,1)):g===!1||(w.push(.5,.5,.5,.5,.5,-.5,.5-N,.5,-.5,.5-N,.5,-.5,.5-N,.5,.5,.5,.5,.5,-.5+N,.5,.5,-.5+N,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5+N,.5,.5,.5-N,.5,.5,.5-N,.5,.5-E,-.5+N,.5,.5-E,-.5+N,.5,.5-E,-.5+N,.5,.5,.5-N,.5,.5,.5-N,.5,-.5+E,.5-N,.5,-.5,-.5+N,.5,-.5,-.5+N,.5,-.5,-.5+N,.5,-.5+E,.5-N,.5,-.5+E),z.push(1,1,1,0,1-N,0,1-N,0,1-N,1,1,1,N,1,N,0,0,0,0,0,0,1,N,1,1-N,1,1-N,1-E,N,1-E,N,1-E,N,1,1-N,1,1-N,E,1-N,0,N,0,N,0,N,E,1-N,E)),r===!0?(w.push(.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5),z.push(1,0,0,1,1,1,0,1,1,0,0,0)):r===!1||(w.push(.5,-.5,.5,.5-N,-.5,-.5,.5,-.5,-.5,.5-N,-.5,-.5,.5,-.5,.5,.5-N,-.5,.5,-.5+N,-.5,.5,-.5,-.5,-.5,-.5+N,-.5,-.5,-.5,-.5,-.5,-.5+N,-.5,.5,-.5,-.5,.5,.5-N,-.5,.5,-.5+N,-.5,.5-E,.5-N,-.5,.5-E,-.5+N,-.5,.5-E,.5-N,-.5,.5,-.5+N,-.5,.5,.5-N,-.5,-.5+E,-.5+N,-.5,-.5,.5-N,-.5,-.5,-.5+N,-.5,-.5,.5-N,-.5,-.5+E,-.5+N,-.5,-.5+E),z.push(1,0,1-N,1,1,1,1-N,1,1,0,1-N,0,N,0,0,1,N,1,0,1,N,0,0,0,1-N,0,N,E,1-N,E,N,E,1-N,0,N,0,1-N,1-E,N,1,1-N,1,N,1,1-N,1-E,N,1-E)),{vs:w,uv:z}}}),S($.Style,{"dw.flip":!1,"dw.s3":[.999,.999,.5],"dw.t3":U,"dw.expanded":!1,"dw.toggleable":!0,"dw.axis":"left","dw.start":0,"dw.end":c/2,"dw.angle":0,"attach.cull":!1,"attach.operation":"subtract"},!0),Kn.forEach(function(T){var H={};H[T+w]=!1,H[T+".toggleable"]=!1,H[T+".axis"]=C,H[T+".start"]=0,H[T+".end"]=c/2,H[T+_]=0,S($.Style,H,!0)});var Jn=function(){this.$4n=[]};Jn.$15n=function($){var r=new Jn;return r.$4n=$,r},Jn.prototype={clone:function(){var B=new Jn;return B.$4n=this.$4n.map(function(O){return O.clone()}),B},$19n:function(){return this.$4n},union:function(q){var F=new Th(this.clone().$4n),m=new Th(q.clone().$4n);return F.$3n(m),m.$3n(F),m.$6n(),m.$3n(F),m.$6n(),F.$7n(m.$2n()),Jn.$15n(F.$2n())},subtract:function(L){var e=new Th(this.clone().$4n),l=new Th(L.clone().$4n);return e.$6n(),e.$3n(l),l.$3n(e),l.$6n(),l.$3n(e),l.$6n(),e.$7n(l.$2n()),e.$6n(),Jn.$15n(e.$2n())},intersect:function(I){var q=new Th(this.clone().$4n),G=new Th(I.clone().$4n);return q.$6n(),G.$3n(q),G.$6n(),q.$3n(G),G.$3n(q),q.$7n(G.$2n()),q.$6n(),Jn.$15n(q.$2n())},inverse:function(){var M=this.clone();return M.$4n.map(function(R){R.flip()}),M}},Jn.cube=function(t){t=t||{};var Y=new Zj(t.center||[0,0,0]),_=t.radius?t.radius.length?t.radius:[t.radius,t.radius,t.radius]:[1,1,1];return Jn.$15n([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(V){return new Xh(V[0].map(function(x){var P=new Zj(Y.x+_[0]*(2*!!(1&x)-1),Y.y+_[1]*(2*!!(2&x)-1),Y.z+_[2]*(2*!!(4&x)-1));return new ph(P,new Zj(V[1]))}))}))},Jn.sphere=function(j){function P(T,D){T*=2*c,D*=c;var d=new Zj(t(T)*i(D),t(D),i(T)*i(D));k.push(new ph(O.$20n(d.$21n(K)),d))}j=j||{};for(var k,O=new Zj(j.center||[0,0,0]),K=j.radius||1,l=j.slices||16,d=j.stacks||8,o=[],y=0;l>y;y++)for(var z=0;d>z;z++)k=[],P(y/l,z/d),z>0&&P((y+1)/l,z/d),d-1>z&&P((y+1)/l,(z+1)/d),P(y/l,(z+1)/d),o.push(new Xh(k));return Jn.$15n(o)},Jn.cylinder=function(h){function S(y,J,A){var N=2*J*c,R=j.$21n(t(N)).$20n(U.$21n(i(N))),L=a.$20n(f.$21n(y)).$20n(R.$21n(p)),b=R.$21n(1-P(A)).$20n(e.$21n(A));return new ph(L,b)}h=h||{};for(var a=new Zj(h.start||[0,-1,0]),v=new Zj(h.end||[0,1,0]),f=v.$13n(a),p=h.radius||1,V=h.slices||16,e=f.$14n(),A=P(e.y)>.5,j=new Zj(A,!A,0).$12n(e).$14n(),U=j.$12n(e).$14n(),H=new ph(a,e.$11n()),k=new ph(v,e.$14n()),m=[],L=0;V>L;L++){var b=L/V,Q=(L+1)/V;m.push(new Xh([H,S(0,b,-1),S(0,Q,-1)])),m.push(new Xh([S(0,Q,0),S(0,b,0),S(1,b,0),S(1,Q,0)])),m.push(new Xh([k,S(1,Q,1),S(1,b,1)]))}return Jn.$15n(m)};var Zj=function(y,h,v){var n=this;3==arguments.length?(n.x=y,n.y=h,n.z=v):"x"in y?(n.x=y.x,n.y=y.y,n.z=y.z):(n.x=y[0],n.y=y[1],n.z=y[2])};Zj.prototype={clone:function(){return new Zj(this.x,this.y,this.z)},$11n:function(){return new Zj(-this.x,-this.y,-this.z)},$20n:function(Z){return new Zj(this.x+Z.x,this.y+Z.y,this.z+Z.z)},$13n:function(U){return new Zj(this.x-U.x,this.y-U.y,this.z-U.z)},$21n:function(G){return new Zj(this.x*G,this.y*G,this.z*G)},$16n:function(F){return new Zj(this.x/F,this.y/F,this.z/F)},$23n:function(d){return this.x*d.x+this.y*d.y+this.z*d.z},lerp:function(U,d){return this.$20n(U.$13n(this).$21n(d))},length:function(){return n(this.$23n(this))},$14n:function(){return this.$16n(this.length())},$12n:function(M){var P=this;return new Zj(P.y*M.z-P.z*M.y,P.z*M.x-P.x*M.z,P.x*M.y-P.y*M.x)}};var ph=function(X,Q,y){var D=this;D.$24n=new Zj(X),D.$22n=new Zj(Q),D.uv=y?new Zj(y):null};ph.prototype={clone:function(){var U=this;return new ph(U.$24n.clone(),U.$22n.clone(),U.uv?U.uv.clone():null)},flip:function(){this.$22n=this.$22n.$11n()},$18n:function(N,E){var v=this;return new ph(v.$24n.lerp(N.$24n,E),v.$22n.lerp(N.$22n,E),v.uv?v.uv.lerp(N.uv,E):null)}};var Uq=function(m,i){this.$22n=m,this.w=i};Uq.$17n=function(b,U,e){var S=U.$13n(b).$12n(e.$13n(b)).$14n();return new Uq(S,S.$23n(b))},Uq.prototype={clone:function(){return new Uq(this.$22n.clone(),this.w)},flip:function(){var o=this;o.$22n=o.$22n.$11n(),o.w=-o.w},$5n:function(z,y,Z,n,t){for(var m=this,j=0,L=1,x=2,f=3,a=0,P=[],X=0;X<z.$9n.length;X++){var S=m.$22n.$23n(z.$9n[X].$24n)-m.w,K=-G>S?x:S>G?L:j;a|=K,P.push(K)}switch(a){case j:(m.$22n.$23n(z.$8n.$22n)>0?y:Z).push(z);break;case L:n.push(z);break;case x:t.push(z);break;case f:for(var c=[],u=[],X=0;X<z.$9n.length;X++){var H=(X+1)%z.$9n.length,e=P[X],o=P[H],s=z.$9n[X],V=z.$9n[H];if(e!=x&&c.push(s),e!=L&&u.push(e!=x?s.clone():s),(e|o)==f){var S=(m.w-this.$22n.$23n(s.$24n))/m.$22n.$23n(V.$24n.$13n(s.$24n)),R=s.$18n(V,S);c.push(R),u.push(R.clone())}}c.length>=3&&n.push(new Xh(c,z.$10n)),u.length>=3&&t.push(new Xh(u,z.$10n))}}};var Xh=function(m,W){var y=this;y.$9n=m,y.$10n=W,y.$8n=Uq.$17n(m[0].$24n,m[1].$24n,m[2].$24n)};Xh.prototype={clone:function(){var O=this.$9n.map(function(E){return E.clone()});return new Xh(O,this.$10n)},flip:function(){this.$9n.reverse().map(function(J){J.flip()}),this.$8n.flip()}};var Th=function(O){var A=this;A.$8n=null,A.front=null,A.back=null,A.$4n=[],O&&A.$7n(O)};Th.prototype={clone:function(){var G=this,C=new Th;return C.$8n=G.$8n&&G.$8n.clone(),C.front=G.front&&G.front.clone(),C.back=G.back&&G.back.clone(),C.$4n=G.$4n.map(function(Q){return Q.clone()}),C},$6n:function(){for(var z=this,J=0;J<z.$4n.length;J++)z.$4n[J].flip();z.$8n.flip(),z.front&&z.front.$6n(),z.back&&z.back.$6n();var Y=z.front;z.front=z.back,z.back=Y},$1n:function(r){var Z=this;if(!Z.$8n)return r.slice();for(var L=[],y=[],q=0;q<r.length;q++)Z.$8n.$5n(r[q],L,y,L,y);return Z.front&&(L=Z.front.$1n(L)),y=Z.back?Z.back.$1n(y):[],L.concat(y)},$3n:function(s){var H=this;H.$4n=s.$1n(H.$4n),H.front&&H.front.$3n(s),H.back&&H.back.$3n(s)},$2n:function(){var S=this,u=S.$4n.slice();return S.front&&(u=u.concat(S.front.$2n())),S.back&&(u=u.concat(S.back.$2n())),u},$7n:function(u){var K=this;if(u.length){K.$8n||(K.$8n=u[0].$8n.clone());for(var k=[],I=[],y=0;y<u.length;y++)this.$8n.$5n(u[y],K.$4n,K.$4n,k,I);k.length&&(K.front||(K.front=new Th),this.front.$7n(k)),I.length&&(K.back||(K.back=new Th),K.back.$7n(I))}}};var $d="symbol",mh=$.Symbol=function(e,f,g){var S=this;l(mh,S),S.s3(20,20,20),S.s({"all.visible":!1,shape:"rect"}),S.setIcon(e,f,g)};k("Symbol",I,{setIcon:function(S,Q,k){var w,U=this;return mh.superClass.setIcon.call(U,S),S?(w={for3d:!0,face:"center",position:44,names:[S]},k&&(w.transaprent=!0),Q&&(w.autorotate=Q),U.addStyleIcon($d,w)):U.removeStyleIcon($d),U.setWidth(e.getImageWidth(E.getImage(S),U)||20),w}});var xs=$.CSGNode=function(){l(xs,this),this.s({shape:"rect","attach.thickness":1.001})},uf={position:1,width:1,height:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,tall:1,elevation:1,"s:attach.cull":1,"s:attach.operation":1};k("CSGNode",I,{_22Q:function(){return xj},onPropertyChanged:function(b){var g=this,K=g.getHost();xs.superClass.onPropertyChanged.call(g,b),uf[b.property]&&(K instanceof of||K instanceof xs)&&K.fp("csgNodeChange",!0,!1)}});var xj=function(K,U){l(xj,this,[K,U])};v(xj,b.Node3dUI,{_80o:function(l,h,N){var S=this;S._shape3d?xj.superClass._80o.call(S,l,h,N):(u(S.gv),Sl.forEach(function(B){V(S,l,h,B,N)}))},validate:function(i,x){var l=this,b=l.gv,$=l.data;if($.s("shape3d"))return xj.superClass.validate.call(l,i,x),l._shape3d=!0,void 0;l._shape3d=!1;var k=D($,b.getMat($)),B=i&&i.uv;l.vf2("csg",B);for(var c=0;6>c;c++)for(var f=Kn[c],U=oi[c],y=l.vf2(f,B,x),F=y.mat||k,H=y.vs,S=y.uv,Q=y.tuv,V=0;2>V;V++){var m=X[U+3*V],z=X[U+3*V+1],C=X[U+3*V+2];if(g(H,F,[Y[3*m],Y[3*m+1],Y[3*m+2]]),g(H,F,[Y[3*z],Y[3*z+1],Y[3*z+2]]),g(H,F,[Y[3*C],Y[3*C+1],Y[3*C+2]]),Q)if(S){var j=8*c;Q.push(S[2*m-j],S[2*m+1-j],S[2*z-j],S[2*z+1-j],S[2*C-j],S[2*C+1-j])}else Q.push(A[2*m],A[2*m+1],A[2*z],A[2*z+1],A[2*C],A[2*C+1])}Eb(l,i,x)},vf2:function(M,f,K){var g,n=this,U=n.gv.getFaceVisible(n.data,M);return g=J(n,M,K),g.vs=[],g.tuv=U&&(g.texture||f)?[]:Z,g.visible=U,g}});var of=$.CSGShape=function(){var R=this;l(of,R),R.s({"shape.background":Z,"shape.border.width":8}),R.setTall(240),R.setElevation(120),R.setThickness(14)};k("CSGShape",f,{IRotatable:!1,_22Q:function(){return gn},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setSegments:function(){}});var gn=function(d,T){l(gn,this,[d,T])};v(gn,b.Shape3dUI,{_80o:function(F,T,o){var Q=this;Q.undrawable||(u(Q.gv),Sl.forEach(function(n){V(Q,F,T,n,o)}))},validate:function(A,k){var m=this,h=m.data,$=h.getPoints();if(m.undrawable=$.size()<2)return m.clear(),void 0;var f=h.isClosePath(),W=z(h._thickness/2,G),a=p($,Z,Z,f);Sl.forEach(function(G){m.vf(G,A&&A.uv,!0,k)}),f&&(m.left.visible=!1,m.right.visible=!1),m._12O(a,W),m._20Q(a),Eb(m,A,k)}});var Xn=$.DoorWindow=function(){var C=this;l(Xn,C),C.setElevation(100),C.s3(100,200,14)};k("DoorWindow",xs,{IDoorWindow:!0,toggle:function(s){this.setExpanded(!this.s(j),s)},isExpanded:function(){return this.s(j)},setExpanded:function(C,g){var e=this,T=e.$25n,p=e.getDataModel(),X=e.s(j);if(T&&(T.stop(!0),delete e.$25n),X!==C){p&&p.beginTransaction();var v=C?e.s("dw.end"):e.s("dw.start");e.s(j,C),g=Q(g),g?(X=e.s(y),g.action=function(G){e.s(y,X+(v-X)*G)},g.finishFunc=function(){p&&p.endTransaction()},e.$25n=R(g)):(e.s(y,v),p&&p.endTransaction())}},getMat:function(){var w=this,g=w.s("dw.s3"),D=w.s("dw.t3"),G=w.s("dw.flip"),E=w.s(y);if(g||E||D||G){var U=[];if(G&&U.push({r3:[0,c,0]}),g&&U.push({s3:g}),E){g=w.getFinalScale3d();var q=w.s("dw.axis"),R=g[0]/2,n=g[1]/2;g[2]/2,q===C?U.push({t3:[R,0,0]},{r3:[0,-E,0]},{t3:[-R,0,0]}):q===a?U.push({t3:[-R,0,0]},{r3:[0,E,0]},{t3:[R,0,0]}):q===d?U.push({t3:[0,-n,0]},{r3:[-E,0,0]},{t3:[0,n,0]}):q===r?U.push({t3:[0,n,0]},{r3:[E,0,0]},{t3:[0,-n,0]}):q===W?U.push({r3:[0,E,0]}):q===F&&U.push({r3:[E,0,0]})}return D&&U.push({t3:D}),o(U)}return Z}});var Re=$.CSGBox=function(){var e=this;l(Re,e),e.setElevation(100),e.s3(100,200,100)};k("CSGBox",xs,{ICSGBox:!0,toggleFace:function(D,C){this.setFaceExpanded(D,!this.s(D+w),C)},isFaceExpanded:function(M){return this.s(M+w)},setFaceExpanded:function(b,c,B){var C=this,j=C.$25n,V=C.s(b+w);if(j&&(j.stop(!0),delete C.$25n),V!==c){var G=c?C.s(b+".end"):C.s(b+".start");C.s(b+w,c),B=Q(B),B?(V=C.s(b+_),B.action=function(Y){C.s(b+_,V+(G-V)*Y)},C.$25n=R(B)):C.s(b+_,G)}},getFaceMat:function(I){var j=this,Y=j.s(I+_);if(!Y)return Z;var L=j.s(I+".axis"),f=j.s3(),E=f[0]/2,U=f[1]/2,Q=f[2]/2,X=[];return I===s&&(L===C?X.push({t3:[E,0,-Q]},{r3:[0,-Y,0]},{t3:[-E,0,Q]}):L===a?X.push({t3:[-E,0,-Q]},{r3:[0,Y,0]},{t3:[E,0,Q]}):L===d?X.push({t3:[0,-U,-Q]},{r3:[-Y,0,0]},{t3:[0,U,Q]}):L===r?X.push({t3:[0,U,-Q]},{r3:[Y,0,0]},{t3:[0,-U,Q]}):L===W?X.push({t3:[0,0,-Q]},{r3:[0,Y,0]},{t3:[0,0,Q]}):L===F&&X.push({t3:[0,0,-Q]},{r3:[Y,0,0]},{t3:[0,0,Q]})),I===H&&(L===C?X.push({t3:[-E,0,Q]},{r3:[0,-Y,0]},{t3:[E,0,-Q]}):L===a?X.push({t3:[E,0,Q]},{r3:[0,Y,0]},{t3:[-E,0,-Q]}):L===d?X.push({t3:[0,-U,Q]},{r3:[Y,0,0]},{t3:[0,U,-Q]}):L===r?X.push({t3:[0,U,Q]},{r3:[-Y,0,0]},{t3:[0,-U,-Q]}):L===W?X.push({t3:[0,0,Q]},{r3:[0,Y,0]},{t3:[0,0,-Q]}):L===F&&X.push({t3:[0,0,Q]},{r3:[Y,0,0]},{t3:[0,0,-Q]})),I===C&&(L===C?X.push({t3:[E,0,Q]},{r3:[0,-Y,0]},{t3:[-E,0,-Q]}):L===a?X.push({t3:[E,0,-Q]},{r3:[0,Y,0]},{t3:[-E,0,Q]}):L===d?X.push({t3:[E,-U,0]},{r3:[0,0,-Y]},{t3:[-E,U,0]}):L===r?X.push({t3:[E,U,0]},{r3:[0,0,Y]},{t3:[-E,-U,0]}):L===W?X.push({t3:[E,0,0]},{r3:[0,Y,0]},{t3:[-E,0,0]}):L===F&&X.push({t3:[E,0,0]},{r3:[0,0,Y]},{t3:[-E,0,0]})),I===a&&(L===C?X.push({t3:[-E,0,-Q]},{r3:[0,-Y,0]},{t3:[E,0,Q]}):L===a?X.push({t3:[-E,0,Q]},{r3:[0,Y,0]},{t3:[E,0,-Q]}):L===d?X.push({t3:[-E,-U,0]},{r3:[0,0,Y]},{t3:[E,U,0]}):L===r?X.push({t3:[-E,U,0]},{r3:[0,0,-Y]},{t3:[E,-U,0]}):L===W?X.push({t3:[-E,0,0]},{r3:[0,Y,0]},{t3:[E,0,0]}):L===F&&X.push({t3:[-E,0,0]},{r3:[0,0,Y]},{t3:[E,0,0]})),I===d&&(L===C?X.push({t3:[E,-U,0]},{r3:[0,0,Y]},{t3:[-E,U,0]}):L===a?X.push({t3:[-E,-U,0]},{r3:[0,0,-Y]},{t3:[E,U,0]}):L===d?X.push({t3:[0,-U,Q]},{r3:[-Y,0,0]},{t3:[0,U,-Q]}):L===r?X.push({t3:[0,-U,-Q]},{r3:[Y,0,0]},{t3:[0,U,Q]}):L===W?X.push({t3:[0,-U,0]},{r3:[0,0,Y]},{t3:[0,U,0]}):L===F&&X.push({t3:[0,-U,0]},{r3:[Y,0,0]},{t3:[0,U,0]})),I===r&&(L===C?X.push({t3:[E,U,0]},{r3:[0,0,-Y]},{t3:[-E,-U,0]}):L===a?X.push({t3:[-E,U,0]},{r3:[0,0,Y]},{t3:[E,-U,0]}):L===d?X.push({t3:[0,U,-Q]},{r3:[-Y,0,0]},{t3:[0,-U,Q]}):L===r?X.push({t3:[0,U,Q]},{r3:[Y,0,0]},{t3:[0,-U,-Q]}):L===W?X.push({t3:[0,U,0]},{r3:[0,0,Y]},{t3:[0,-U,0]}):L===F&&X.push({t3:[0,U,0]},{r3:[Y,0,0]},{t3:[0,-U,0]})),o(X)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);