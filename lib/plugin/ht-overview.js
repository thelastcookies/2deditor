!function(v,h){"use strict";var G="ht",o=G+".graph.",K=v[G],k=K.graph,S=K.Default,Y=K.Color,I=null,u="px",l=S.getInternal(),f=l.getPinchDist,R=S.preventDefault,w=S.getTouchCount,P=S.startDragging;l.addMethod(S,{overviewBackground:Y.widgetBackground,overviewMaskBackground:Y.transparent,overviewContentBorderColor:Y.widgetBorder,overviewContentBackground:Y.background},!0),k.Overview=function(q){var c=this,D=c._view=l.createView(1,c);c._canvas=l.createCanvas(D),D.style.background=S.overviewBackground,D.appendChild(c._mask=l.createDiv()),c.setGraphView(q),c.addListeners()},S.def(o+"Overview",h,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:S.overviewMaskBackground,_contentBorderColor:S.overviewContentBorderColor,_contentBackground:S.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(Q){var R=this;if(R.gv!==Q){var K=R.gv;R.gv=Q,K&&(K.removeViewListener(R.handleGraphViewChanged,R),K.ump(R.handleGraphViewPropertyChanged,R)),Q&&(Q.addViewListener(R.handleGraphViewChanged,R),Q.mp(R.handleGraphViewPropertyChanged,R)),R.fp("graphView",K,Q),R.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(s){this._autoUpdate&&"validate"===s.kind&&this.redraw()},handleGraphViewPropertyChanged:function(y){("canvasBackground"===y.property||this.getFixToRect()&&("zoom"===y.property||"translateX"===y.property||"translateY"===y.property))&&this.redraw()},redraw:function(){var K=this;K._redraw||(K._redraw=1,K.iv(50))},validateImpl:function(){var _=this,J=_.gv,x=_._canvas,U=_.getWidth(),R=_.getHeight(),W=_._redraw;if(J){var m=_._mask,A=m.style,L=J.getViewRect(),Z=this.getFixToRect(),T=Z?"boolean"==typeof Z?J.getContentRect():Z:J.getScrollRect(),w=T.x,O=T.y,k=T.width,X=T.height,y=_._rate=Math.max(k/U,X/R),f=_._x=(U-k/y)/2,D=_._y=(R-X/y)/2;if(0!==L.width&&0!==L.height||_.hasRetry||(S.callLater(_.iv,_,I),_.hasRetry=!0),(U!==x.clientWidth||R!==x.clientHeight)&&(l.setCanvas(x,U,R),W=1),l.isSameRect(T,_._scrollRect)||(_._scrollRect=T,W=1),W){var Y=l.initContext(x),V=J.getDataModel(),K=V.getBackground()||_._contentBackground,r=_._contentBorderColor,o=S.devicePixelRatio;Y.clearRect(0,0,U*o,R*o);var Q=V.getBackground()&&V.a("width")>0&&V.a("height")>0;K&&!Q&&l.fillRect(Y,f*o,D*o,k/y*o,X/y*o,K),l.translateAndScale(Y,-w/y+f,-O/y+D,1/y),J._42(Y),Y.restore(),r&&l.drawBorder(Y,r,f*o,D*o,k/y*o,X/y*o)}A.background=_._maskBackground,A.left=f+(L.x-w)/y+u,A.top=D+(L.y-O)/y+u,A.width=L.width/y+u,A.height=L.height/y+u,_._redraw=null}else if(W){var Y=l.initContext(x);Y.clearRect(0,0,U,R),Y.restore(),_._redraw=null}},center:function(i){var f=this,G=f.gv;if(G){var Z=G._zoom,o=G._29I,g=f._rate,H=f._scrollRect,M=S.getLogicalPoint(i,f._canvas),D=H.x+(M.x-f._x)*g,Y=H.y+(M.y-f._y)*g;G.setTranslate((o.width/2-D)*Z,(o.height/2-Y)*Z)}},handle_mousedown:function(W){this.handle_touchstart(W)},handleWindowMouseUp:function(n){this.handleWindowTouchEnd(n)},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta)},handle_DOMMouseScroll:function(A){2===A.axis&&this.handleScroll(A,-A.detail)},handleScroll:function(b,B){if(R(b),this.gv){var w=this.gv;B>0?w.scrollZoomIn():0>B&&w.scrollZoomOut()}},handle_touchstart:function(I){if(R(I),this.gv&&S.isLeftButton(I)){var N=this,p=N.gv,n=w(I);1===n?S.isDoubleClick(I)&&p.isResettable()?p.reset():(N.center(I),P(N,I)):2===n&&(N._dist=f(I),P(N,I))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(s){if(this.gv){var O=this,N=O._dist,R=w(s);1===R?O.center(s):2===R&&N!=I&&O.gv.handlePinch(I,f(s),N)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);