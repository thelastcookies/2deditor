!function(P,h){"use strict";var T="ht",L=T+".graph.",s=P[T],f=s.graph,w=s.Default,u=s.Color,Q=null,r="px",E=w.getInternal(),S=E.getPinchDist,d=w.preventDefault,B=w.getTouchCount,V=w.startDragging;E.addMethod(w,{overviewBackground:u.widgetBackground,overviewMaskBackground:u.transparent,overviewContentBorderColor:u.widgetBorder,overviewContentBackground:u.background},!0),f.Overview=function(U){var p=this,c=p._view=E.createView(1,p);p._canvas=E.createCanvas(c),c.style.background=w.overviewBackground,c.appendChild(p._mask=E.createDiv()),p.setGraphView(U),p.addListeners()},w.def(L+"Overview",h,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:w.overviewMaskBackground,_contentBorderColor:w.overviewContentBorderColor,_contentBackground:w.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(n){var S=this;if(S.gv!==n){var w=S.gv;S.gv=n,w&&(w.removeViewListener(S.handleGraphViewChanged,S),w.ump(S.handleGraphViewPropertyChanged,S)),n&&(n.addViewListener(S.handleGraphViewChanged,S),n.mp(S.handleGraphViewPropertyChanged,S)),S.fp("graphView",w,n),S.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(k){this._autoUpdate&&"validate"===k.kind&&this.redraw()},handleGraphViewPropertyChanged:function(U){("canvasBackground"===U.property||this.getFixToRect()&&("zoom"===U.property||"translateX"===U.property||"translateY"===U.property))&&this.redraw()},redraw:function(){var q=this;q._redraw||(q._redraw=1,q.iv(50))},validateImpl:function(){var I=this,M=I.gv,j=I._canvas,R=I.getWidth(),t=I.getHeight(),C=I._redraw;if(M){var T=I._mask,o=T.style,q=M.getViewRect(),A=this.getFixToRect(),l=A?"boolean"==typeof A?M.getContentRect():A:M.getScrollRect(),G=l.x,g=l.y,f=l.width,W=l.height,a=I._rate=Math.max(f/R,W/t),K=I._x=(R-f/a)/2,_=I._y=(t-W/a)/2;if(0!==q.width&&0!==q.height||I.hasRetry||(w.callLater(I.iv,I,Q),I.hasRetry=!0),(R!==j.clientWidth||t!==j.clientHeight)&&(E.setCanvas(j,R,t),C=1),E.isSameRect(l,I._scrollRect)||(I._scrollRect=l,C=1),C){var p=E.initContext(j),v=M.getDataModel(),h=v.getBackground()||I._contentBackground,y=I._contentBorderColor,b=w.devicePixelRatio;p.clearRect(0,0,R*b,t*b);var J=v.getBackground()&&v.a("width")>0&&v.a("height")>0;h&&!J&&E.fillRect(p,K*b,_*b,f/a*b,W/a*b,h),E.translateAndScale(p,-G/a+K,-g/a+_,1/a),M._42(p),p.restore(),y&&E.drawBorder(p,y,K*b,_*b,f/a*b,W/a*b)}o.background=I._maskBackground,o.left=K+(q.x-G)/a+r,o.top=_+(q.y-g)/a+r,o.width=q.width/a+r,o.height=q.height/a+r,I._redraw=null}else if(C){var p=E.initContext(j);p.clearRect(0,0,R,t),p.restore(),I._redraw=null}},center:function(c){var F=this,V=F.gv;if(V){var $=V._zoom,h=V._29I,N=F._rate,W=F._scrollRect,z=w.getLogicalPoint(c,F._canvas),D=W.x+(z.x-F._x)*N,t=W.y+(z.y-F._y)*N;V.setTranslate((h.width/2-D)*$,(h.height/2-t)*$)}},handle_mousedown:function(f){this.handle_touchstart(f)},handleWindowMouseUp:function(C){this.handleWindowTouchEnd(C)},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handle_mousewheel:function(R){this.handleScroll(R,R.wheelDelta)},handle_DOMMouseScroll:function(h){2===h.axis&&this.handleScroll(h,-h.detail)},handleScroll:function(z,j){if(d(z),this.gv){var x=this.gv;j>0?x.scrollZoomIn():0>j&&x.scrollZoomOut()}},handle_touchstart:function(J){if(d(J),this.gv&&w.isLeftButton(J)){var i=this,l=i.gv,E=B(J);1===E?w.isDoubleClick(J)&&l.isResettable()?l.reset():(i.center(J),V(i,J)):2===E&&(i._dist=S(J),V(i,J))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(y){if(this.gv){var X=this,M=X._dist,j=B(y);1===j?X.center(y):2===j&&M!=Q&&X.gv.handlePinch(Q,S(y),M)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);