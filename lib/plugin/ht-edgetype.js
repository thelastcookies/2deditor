!function(l){"use strict";var Y="ht",x=l[Y],A=Math,q=A.max,b=A.min,t=A.abs,H=A.atan2,r=(A.cos,A.sin,A.ceil),s=x.Default,$=s.getInternal(),w=x.List,v=$.Mat,M=$.getNodeRect,G=$.intersectionLineRect,Z=s.getDistance,N=s.setEdgeType,P="left",J="right",C="top",L="bottom",n="edge.type",B="edge.gap",E="edge.center",d="edge.extend",V=function(t,Y){return M(t,Y).width},X=function(s,q){return M(s,q).height},I=function(e,N){return $.getEdgeHostPosition(e,N,"source")},i=function(h,w){return $.getEdgeHostPosition(h,w,"target")},F=function(L,N){var E=L.s(n),k=L.getEdgeGroup();if(k){var J=0;if(k.eachSiblingEdge(function($){N.isVisible($)&&$.s(n)==E&&J++}),J>1)return L.s(B)*(J-1)/2}return 0},k=function(N,J){var u=N.s(n),o=N.isLooped();if(!N.getEdgeGroup())return o?N.s(B):0;var $,m=0,e=0,G=0;return N.getEdgeGroup().getSiblings().each(function(c){c.each(function(g){if(g._40I===N._40I&&g.s(n)==u&&J.isVisible(g)){var k=g.s(B);$?(e+=G/2+k/2,G=k):($=g,G=k),g===N&&(m=e)}})}),o?e-m+G:m-e/2},j=function(y,k){var F=k.s("edge.corner.radius");return s.toRoundedCorner(y,F)};$.addMethod(x.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),N("boundary",function(n,c,b,p){p||(c=-c);var r,m=I(b,n),P=i(b,n),g=M(b,n._40I),X=M(b,n._41I),E=new v(H(P.y-m.y,P.x-m.x)),y=Z(m,P),z=m.x,t=m.y;return r=E.tf(0,c),m={x:r.x+z,y:r.y+t},r=E.tf(y,c),P={x:r.x+z,y:r.y+t},r=G(m,P,g),r&&(m={x:r[0],y:r[1]}),r=G(m,P,X),r&&(P={x:r[0],y:r[1]}),{points:new w([m,P])}}),N("ripple",function(t,c,N,p){p||(c=-c);var q=I(N,t),j=i(N,t),g=Z(q,j),z=b(t.s("edge.offset"),g/2),$=t.s("edge.ripple.size"),F=t.s("edge.ripple.length"),V=t.s("edge.ripple.both"),M=t.s(E),f=t.s("edge.ripple.elevation"),h=new w,R=t.s("edge.ripple.straight")?null:new w,Y=new v(H(j.y-q.y,j.x-q.x));p||(f=-f),g-=2*z,F>0&&($=r(g/F));var W=g/$;R&&R.add(1);for(var y=0;$>y;y++)R&&R.add(3),0===y?h.add({x:z+W*y,y:M?0:c}):h.add({x:z+W*y,y:c}),h.add({x:z+W*y+W/2,y:f+c}),V&&(f=-f);for(h.add({x:z+g,y:M?0:c}),y=0;y<h.size();y++){var T=Y.tf(h.get(y));T.x+=q.x,T.y+=q.y,h.set(y,T)}return{points:h,segments:R}}),N("h.v",function(l,d,D){d=k(l,D);var s=new w,O=l.s(E),Q=I(D,l),q=Q.x,b=Q.y,f=i(D,l),p=f.x,t=f.y,h=l._40I instanceof x.Edge,Y=l._41I instanceof x.Edge,R=0,g=0,_=p-q,W=t-b;return O||(R=h?0:V(D,l._40I)/2,g=Y?0:X(D,l._41I)/2),_>=0&&0>=W?(s.add({x:q+R,y:b+d}),s.add({x:p+d,y:b+d}),s.add({x:p+d,y:t+g})):0>=_&&W>=0?(s.add({x:q-R,y:b+d}),s.add({x:p+d,y:b+d}),s.add({x:p+d,y:t-g})):_>=0&&W>=0?(s.add({x:q+R,y:b+d}),s.add({x:p-d,y:b+d}),s.add({x:p-d,y:t-g})):(s.add({x:q-R,y:b+d}),s.add({x:p-d,y:b+d}),s.add({x:p-d,y:t+g})),j(s,l)}),N("v.h",function(F,C,U){C=k(F,U);var c=new w,f=F.s(E),q=I(U,F),Q=q.x,y=q.y,R=i(U,F),m=R.x,Z=R.y,K=F._40I instanceof x.Edge,o=F._41I instanceof x.Edge,L=0,H=0,$=m-Q,D=Z-y;return f||(L=o?0:V(U,F._41I)/2,H=K?0:X(U,F._40I)/2),$>=0&&0>=D?(c.add({x:Q+C,y:y-H}),c.add({x:Q+C,y:Z+C}),c.add({x:m-L,y:Z+C})):0>=$&&D>=0?(c.add({x:Q+C,y:y+H}),c.add({x:Q+C,y:Z+C}),c.add({x:m+L,y:Z+C})):$>=0&&D>=0?(c.add({x:Q-C,y:y+H}),c.add({x:Q-C,y:Z+C}),c.add({x:m-L,y:Z+C})):(c.add({x:Q-C,y:y-H}),c.add({x:Q-C,y:Z+C}),c.add({x:m+L,y:Z+C})),j(c,F)}),N("ortho",function(y,C,U){var o=new w,A=y.s(E),u=y.s("edge.ortho"),N=y._40I,s=y._41I,O=I(U,y),k=O.x,g=O.y,S=i(U,y),R=S.x,d=S.y,W=R-k,K=d-g,n=N instanceof x.Edge,G=s instanceof x.Edge,Q=A||n?0:V(U,N)/2,M=A||n?0:X(U,N)/2,r=A||G?0:V(U,s)/2,f=A||G?0:X(U,s)/2,h=(W-(Q+r)*(W>0?1:-1))*u,T=(K-(M+f)*(K>0?1:-1))*u;return t(W)<t(K)?W>=0&&0>=K?(o.add({x:k+C,y:g-M}),o.add({x:k+C,y:g+T+C-M}),o.add({x:R+C,y:g+T+C-M}),o.add({x:R+C,y:d+f})):0>=W&&K>=0?(o.add({x:k+C,y:g+M}),o.add({x:k+C,y:g+T+C+M}),o.add({x:R+C,y:g+T+C+M}),o.add({x:R+C,y:d-f})):W>=0&&K>=0?(o.add({x:k+C,y:g+M}),o.add({x:k+C,y:g+T-C+M}),o.add({x:R+C,y:g+T-C+M}),o.add({x:R+C,y:d-f})):(o.add({x:k+C,y:g-M}),o.add({x:k+C,y:g+T-C-M}),o.add({x:R+C,y:g+T-C-M}),o.add({x:R+C,y:d+f})):W>=0&&0>=K?(o.add({x:k+Q,y:g+C}),o.add({x:k+h+C+Q,y:g+C}),o.add({x:k+h+C+Q,y:d+C}),o.add({x:R-r,y:d+C})):0>=W&&K>=0?(o.add({x:k-Q,y:g+C}),o.add({x:k+h+C-Q,y:g+C}),o.add({x:k+h+C-Q,y:d+C}),o.add({x:R+r,y:d+C})):W>=0&&K>=0?(o.add({x:k+Q,y:g+C}),o.add({x:k+h-C+Q,y:g+C}),o.add({x:k+h-C+Q,y:d+C}),o.add({x:R-r,y:d+C})):(o.add({x:k-Q,y:g+C}),o.add({x:k+h-C-Q,y:g+C}),o.add({x:k+h-C-Q,y:d+C}),o.add({x:R+r,y:d+C})),j(o,y)}),N("flex",function(g,r,L){var B=new w,k=g.s("edge.flex")+F(g,L),Q=g.s(E),T=g._40I,N=g._41I,W=I(L,g),P=W.x,$=W.y,H=i(L,g),C=H.x,A=H.y,Z=T instanceof x.Edge,K=N instanceof x.Edge,o=C-P,G=A-$,s=Q||Z?0:V(L,T)/2,z=Q||Z?0:X(L,T)/2,h=Q||K?0:V(L,N)/2,b=Q||K?0:X(L,N)/2,M=o>0?k:-k,e=G>0?k:-k;return t(o)<t(G)?o>=0&&0>=G?(B.add({x:P+r,y:$-z}),B.add({x:P+r,y:$+e+r-z}),B.add({x:C+r,y:A-e+r+b}),B.add({x:C+r,y:A+b})):0>=o&&G>=0?(B.add({x:P+r,y:$+z}),B.add({x:P+r,y:$+e+r+z}),B.add({x:C+r,y:A-e+r-b}),B.add({x:C+r,y:A-b})):o>=0&&G>=0?(B.add({x:P+r,y:$+z}),B.add({x:P+r,y:$+e-r+z}),B.add({x:C+r,y:A-e-r-b}),B.add({x:C+r,y:A-b})):(B.add({x:P+r,y:$-z}),B.add({x:P+r,y:$+e-r-z}),B.add({x:C+r,y:A-e-r+b}),B.add({x:C+r,y:A+b})):o>=0&&0>=G?(B.add({x:P+s,y:$+r}),B.add({x:P+M+r+s,y:$+r}),B.add({x:C-M+r-h,y:A+r}),B.add({x:C-h,y:A+r})):0>=o&&G>=0?(B.add({x:P-s,y:$+r}),B.add({x:P+M+r-s,y:$+r}),B.add({x:C-M+r+h,y:A+r}),B.add({x:C+h,y:A+r})):o>=0&&G>=0?(B.add({x:P+s,y:$+r}),B.add({x:P+M-r+s,y:$+r}),B.add({x:C-M-r-h,y:A+r}),B.add({x:C-h,y:A+r})):(B.add({x:P-s,y:$+r}),B.add({x:P+M-r-s,y:$+r}),B.add({x:C-M-r+h,y:A+r}),B.add({x:C+h,y:A+r})),j(B,g)}),N("extend.east",function(v,u,m){var r=new w,D=v.s(d)+F(v,m),O=v.s(E),S=I(m,v),Y=v._40I instanceof x.Edge,t=v._41I instanceof x.Edge,$=S.x+(O||Y?0:V(m,v._40I)/2),o=S.y,X=i(m,v),a=X.x+(O||t?0:V(m,v._41I)/2),k=X.y,P=q($,a)+D;return o>k?(r.add({x:$,y:o+u}),r.add({x:P+u,y:o+u}),r.add({x:P+u,y:k-u}),r.add({x:a,y:k-u})):(r.add({x:$,y:o-u}),r.add({x:P+u,y:o-u}),r.add({x:P+u,y:k+u}),r.add({x:a,y:k+u})),j(r,v)}),N("extend.west",function(B,u,R){var L=new w,T=B.s(d)+F(B,R),X=B.s(E),l=B._40I instanceof x.Edge,e=B._41I instanceof x.Edge,D=I(R,B),P=D.x-(X||l?0:V(R,B._40I)/2),G=D.y,K=i(R,B),r=K.x-(X||e?0:V(R,B._41I)/2),Z=K.y,_=b(P,r)-T;return G>Z?(L.add({x:P,y:G+u}),L.add({x:_-u,y:G+u}),L.add({x:_-u,y:Z-u}),L.add({x:r,y:Z-u})):(L.add({x:P,y:G-u}),L.add({x:_-u,y:G-u}),L.add({x:_-u,y:Z+u}),L.add({x:r,y:Z+u})),j(L,B)}),N("extend.north",function(U,S,t){var M=new w,c=U.s(d)+F(U,t),r=U.s(E),W=U._40I instanceof x.Edge,l=U._41I instanceof x.Edge,Q=I(t,U),D=Q.x,h=Q.y-(r||W?0:X(t,U._40I)/2),O=i(t,U),P=O.x,y=O.y-(r||l?0:X(t,U._41I)/2),f=b(h,y)-c;return D>P?(M.add({y:h,x:D+S}),M.add({y:f-S,x:D+S}),M.add({y:f-S,x:P-S}),M.add({y:y,x:P-S})):(M.add({y:h,x:D-S}),M.add({y:f-S,x:D-S}),M.add({y:f-S,x:P+S}),M.add({y:y,x:P+S})),j(M,U)}),N("extend.south",function(r,J,u){var K=new w,e=r.s(d)+F(r,u),Q=r.s(E),L=r._40I instanceof x.Edge,P=r._41I instanceof x.Edge,k=I(u,r),S=k.x,$=k.y+(Q||L?0:X(u,r._40I)/2),a=i(u,r),b=a.x,M=a.y+(Q||P?0:X(u,r._41I)/2),Z=q($,M)+e;return S>b?(K.add({y:$,x:S+J}),K.add({y:Z+J,x:S+J}),K.add({y:Z+J,x:b-J}),K.add({y:M,x:b-J})):(K.add({y:$,x:S-J}),K.add({y:Z+J,x:S-J}),K.add({y:Z+J,x:b+J}),K.add({y:M,x:b+J})),j(K,r)});var o=function(v,A,Q,p,g){if(p.sort(function(q,S){var o=q.getSourceAgent()===A?q.getTargetAgent():q.getSourceAgent(),f=S.getSourceAgent()===A?S.getTargetAgent():S.getSourceAgent(),R=o.p(),H=f.p();if(Q===P||Q===J){if(R.y>H.y)return 1;if(R.y<H.y)return-1}else{if(R.x>H.x)return 1;if(R.x<H.x)return-1}return s.sortFunc(q.getId(),S.getId())}),g){for(var d,O,M,l=v.getSourceAgent(),$=v.getTargetAgent(),R=0;R<p.size();R++){var q=p.get(R);q.getSourceAgent()===l&&q.getTargetAgent()===$||q.getTargetAgent()===l&&q.getSourceAgent()===$?(O||(O=new w),O.add(q,0)):O?(M||(M=new w),M.add(q)):(d||(d=new w),d.add(q))}p.clear(),d&&p.addAll(d),O&&p.addAll(O),M&&p.addAll(M)}var j=p.indexOf(v),t=p.size(),F=v.s(B);return{side:Q,index:j,size:t,offset:-F*(t-1)/2+F*j}},y=function(a,Z,g,F,O){var i=Z.s(n);return o(Z,g,F,g.getAgentEdges().toList(function(m){return a.isVisible(m)&&m.s(n)===i}),O)},g=function(X,e){var W=X.getSourceAgent()===e?X.getTargetAgent():X.getSourceAgent(),Z=e.p(),E=W.p(),u=E.x-Z.x,w=E.y-Z.y;return u>0&&t(w)<=u?J:0>u&&t(w)<=-u?P:w>0&&t(u)<=w?L:C},R=function(A,D,I){var h=D.s(n),W=g(D,I);return o(D,I,W,I.getAgentEdges().toList(function(N){return A.isVisible(N)&&N.s(n)===h&&g(N,I)===W}))},S=function(b,K){var B=b.getSourceAgent()===K,o=B?b.getTargetAgent():b.getSourceAgent(),N=K.p(),V=o.p();return B?N.y>V.y?C:L:N.x<V.x?J:P},e=function(M,W,T){var l=W.s(n),m=S(W,T);return o(W,T,m,T.getAgentEdges().toList(function(W){return M.isVisible(W)&&W.s(n)===l&&S(W,T)===m}),m===J||m===L)},p=function(k,N){var M=k.getSourceAgent()===N,E=M?k.getTargetAgent():k.getSourceAgent(),R=N.p(),s=E.p();return M?R.x<s.x?J:P:R.y>s.y?C:L},f=function(N,Y,f){var M=Y.s(n),t=p(Y,f);return o(Y,f,t,f.getAgentEdges().toList(function(C){return N.isVisible(C)&&C.s(n)===M&&p(C,f)===t}),t===J||t===L)},T=function(p,v,i){var R=p.getSourceAgent(),U=p.getTargetAgent(),Q=R.getId()>U.getId(),t=Q?U:R,S=Q?R:U,W=t.p(),g=S.p(),m=i(v,p,t),_=i(v,p,S),O=p.s(E),q=O?0:V(v,t)/2,B=O?0:V(v,S)/2,e=O?0:X(v,t)/2,z=O?0:X(v,S)/2,N=m.offset,s=_.offset,o=m.side,x=_.side,G=new w;return o===C?(G.add({x:W.x+N,y:W.y-e}),G.add({x:W.x+N,y:g.y+s}),x===P?G.add({x:g.x-B,y:g.y+s}):G.add({x:g.x+B,y:g.y+s})):o===L?(G.add({x:W.x+N,y:W.y+e}),G.add({x:W.x+N,y:g.y+s}),x===P?G.add({x:g.x-B,y:g.y+s}):G.add({x:g.x+B,y:g.y+s})):o===P?(G.add({x:W.x-q,y:W.y+N}),G.add({x:g.x+s,y:W.y+N}),x===L?G.add({x:g.x+s,y:g.y+z}):G.add({x:g.x+s,y:g.y-z})):o===J&&(G.add({x:W.x+q,y:W.y+N}),G.add({x:g.x+s,y:W.y+N}),x===L?G.add({x:g.x+s,y:g.y+z}):G.add({x:g.x+s,y:g.y-z})),Q&&G.reverse(),j(G,p)};N("ortho2",function(k,o,y){var e,n,U=k.s(E),A=k.s("edge.ortho"),u=k.getSourceAgent(),l=k.getTargetAgent(),f=u.getId()>l.getId(),i=f?l:u,m=f?u:l,B=i.p(),O=m.p(),r=R(y,k,i),p=R(y,k,m),K=U?0:V(y,i)/2,b=U?0:X(y,i)/2,F=U?0:V(y,m)/2,z=U?0:X(y,m)/2,S=new w,s=r.offset,h=p.offset,c=r.side;return c===J?(e=O.y>B.y?-s:s,n=B.x+K+(O.x-F-B.x-K)*A,S.add({x:B.x+K,y:B.y+s}),S.add({x:n+e,y:B.y+s}),S.add({x:n+e,y:O.y+h}),S.add({x:O.x-F,y:O.y+h})):c===P?(e=O.y>B.y?-s:s,n=B.x-K-(B.x-K-O.x-F)*A,S.add({x:B.x-K,y:B.y+s}),S.add({x:n-e,y:B.y+s}),S.add({x:n-e,y:O.y+h}),S.add({x:O.x+F,y:O.y+h})):c===L?(e=O.x>B.x?-s:s,n=B.y+b+(O.y-z-B.y-b)*A,S.add({x:B.x+s,y:B.y+b}),S.add({x:B.x+s,y:n+e}),S.add({x:O.x+h,y:n+e}),S.add({x:O.x+h,y:O.y-z})):c===C&&(e=O.x>B.x?-s:s,n=B.y-b-(B.y-b-O.y-z)*A,S.add({x:B.x+s,y:B.y-b}),S.add({x:B.x+s,y:n-e}),S.add({x:O.x+h,y:n-e}),S.add({x:O.x+h,y:O.y+z})),f&&S.reverse(),j(S,k)},!0),N("flex2",function(n,o,e){var H,i=n.getSourceAgent(),N=n.getTargetAgent(),G=i.getId()>N.getId(),S=G?N:i,d=G?i:N,t=S.p(),A=d.p(),T=R(e,n,S),Q=R(e,n,d),m=n.s(E),I=n.s("edge.flex")+(T.size-1)/2*n.s(B),D=m?0:V(e,S)/2,F=m?0:X(e,S)/2,z=m?0:V(e,d)/2,Z=m?0:X(e,d)/2,K=new w,O=T.offset,c=Q.offset,b=T.side;return b===J?(H=A.y>t.y?-O:O,K.add({x:t.x+D,y:t.y+O}),K.add({x:t.x+D+I+H,y:t.y+O}),K.add({x:A.x-z-I+H,y:A.y+c}),K.add({x:A.x-z,y:A.y+c})):b===P?(H=A.y>t.y?-O:O,K.add({x:t.x-D,y:t.y+O}),K.add({x:t.x-D-I-H,y:t.y+O}),K.add({x:A.x+z+I-H,y:A.y+c}),K.add({x:A.x+z,y:A.y+c})):b===L?(H=A.x>t.x?-O:O,K.add({x:t.x+O,y:t.y+F}),K.add({x:t.x+O,y:t.y+F+I+H}),K.add({x:A.x+c,y:A.y-Z-I+H}),K.add({x:A.x+c,y:A.y-Z})):b===C&&(H=A.x>t.x?-O:O,K.add({x:t.x+O,y:t.y-F}),K.add({x:t.x+O,y:t.y-F-I-H}),K.add({x:A.x+c,y:A.y+Z+I-H}),K.add({x:A.x+c,y:A.y+Z})),G&&K.reverse(),j(K,n)},!0),N("extend.north2",function(U,Y,f){var D=U.getSourceAgent(),z=U.getTargetAgent(),n=D.getId()>z.getId(),R=n?z:D,$=n?D:z,G=R.p(),p=$.p(),K=y(f,U,R,C),u=y(f,U,$,C,!0),e=U.s(E),s=e?0:X(f,R)/2,Z=e?0:X(f,$)/2,v=K.offset,h=u.offset,J=U.s(d)+(K.size-1)/2*U.s(B),Q=b(G.y-s,p.y-Z)-J+(G.x<p.x?v:-v),q=new w;return q.add({x:G.x+v,y:G.y-s}),q.add({x:G.x+v,y:Q}),q.add({x:p.x+h,y:Q}),q.add({x:p.x+h,y:p.y-Z}),n&&q.reverse(),j(q,U)},!0),N("extend.south2",function(t,k,m){var I=t.getSourceAgent(),F=t.getTargetAgent(),U=I.getId()>F.getId(),f=U?F:I,A=U?I:F,c=f.p(),v=A.p(),T=y(m,t,f,L),l=y(m,t,A,L,!0),Y=t.s(E),V=Y?0:X(m,f)/2,K=Y?0:X(m,A)/2,h=T.offset,$=l.offset,P=t.s(d)+(T.size-1)/2*t.s(B),H=q(c.y+V,v.y+K)+P+(c.x>v.x?h:-h),G=new w;return G.add({x:c.x+h,y:c.y+V}),G.add({x:c.x+h,y:H}),G.add({x:v.x+$,y:H}),G.add({x:v.x+$,y:v.y+K}),U&&G.reverse(),j(G,t)},!0),N("extend.west2",function(s,g,Z){var h=s.getSourceAgent(),Q=s.getTargetAgent(),I=h.getId()>Q.getId(),c=I?Q:h,T=I?h:Q,S=c.p(),o=T.p(),Y=y(Z,s,c,C),L=y(Z,s,T,C,!0),N=s.s(E),X=N?0:V(Z,c)/2,U=N?0:V(Z,T)/2,F=Y.offset,p=L.offset,l=s.s(d)+(Y.size-1)/2*s.s(B),i=b(S.x-X,o.x-U)-l+(S.y<o.y?F:-F),k=new w;return k.add({x:S.x-X,y:S.y+F}),k.add({x:i,y:S.y+F}),k.add({x:i,y:o.y+p}),k.add({x:o.x-U,y:o.y+p}),I&&k.reverse(),j(k,s)},!0),N("extend.east2",function(W,U,H){var v=W.getSourceAgent(),J=W.getTargetAgent(),k=v.getId()>J.getId(),Q=k?J:v,N=k?v:J,n=Q.p(),K=N.p(),R=y(H,W,Q,C),u=y(H,W,N,C,!0),e=W.s(E),Z=e?0:V(H,Q)/2,T=e?0:V(H,N)/2,$=R.offset,h=u.offset,b=W.s(d)+(R.size-1)/2*W.s(B),p=q(n.x+Z,K.x+T)+b+(n.y>K.y?$:-$),f=new w;return f.add({x:n.x+Z,y:n.y+$}),f.add({x:p,y:n.y+$}),f.add({x:p,y:K.y+h}),f.add({x:K.x+T,y:K.y+h}),k&&f.reverse(),j(f,W)},!0),N("v.h2",function(u,x,l){return T(u,l,e)},!0),N("h.v2",function(H,L,K){return T(H,K,f)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);