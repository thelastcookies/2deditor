!function(a){"use strict";var s="ht",D=a[s],j=Math,i=j.max,G=j.min,I=j.abs,z=j.atan2,o=(j.cos,j.sin,j.ceil),e=D.Default,H=e.getInternal(),x=D.List,F=H.Mat,R=H.getNodeRect,Z=H.intersectionLineRect,N=e.getDistance,V=e.setEdgeType,f="left",h="right",y="top",m="bottom",w="edge.type",c="edge.gap",v="edge.center",u="edge.extend",B=function(t,f){return R(t,f).width},L=function(W,m){return R(W,m).height},J=function(j,i){return H.getEdgeHostPosition(j,i,"source")},$=function(o,W){return H.getEdgeHostPosition(o,W,"target")},S=function(I,J){var o=I.s(w),G=I.getEdgeGroup();if(G){var d=0;if(G.eachSiblingEdge(function(A){J.isVisible(A)&&A.s(w)==o&&d++}),d>1)return I.s(c)*(d-1)/2}return 0},l=function(W,J){var A=W.s(w),Y=W.isLooped();if(!W.getEdgeGroup())return Y?W.s(c):0;var S,F=0,n=0,e=0;return W.getEdgeGroup().getSiblings().each(function(Z){Z.each(function(R){if(R._40I===W._40I&&R.s(w)==A&&J.isVisible(R)){var y=R.s(c);S?(n+=e/2+y/2,e=y):(S=R,e=y),R===W&&(F=n)}})}),Y?n-F+e:F-n/2},n=function(B,v){var k=v.s("edge.corner.radius");return e.toRoundedCorner(B,k)};H.addMethod(D.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),V("boundary",function(Q,D,B,p){p||(D=-D);var I,v=J(B,Q),O=$(B,Q),H=R(B,Q._40I),e=R(B,Q._41I),y=new F(z(O.y-v.y,O.x-v.x)),r=N(v,O),n=v.x,o=v.y;return I=y.tf(0,D),v={x:I.x+n,y:I.y+o},I=y.tf(r,D),O={x:I.x+n,y:I.y+o},I=Z(v,O,H),I&&(v={x:I[0],y:I[1]}),I=Z(v,O,e),I&&(O={x:I[0],y:I[1]}),{points:new x([v,O])}}),V("ripple",function(S,q,f,V){V||(q=-q);var w=J(f,S),X=$(f,S),e=N(w,X),K=G(S.s("edge.offset"),e/2),D=S.s("edge.ripple.size"),W=S.s("edge.ripple.length"),T=S.s("edge.ripple.both"),C=S.s(v),g=S.s("edge.ripple.elevation"),y=new x,O=S.s("edge.ripple.straight")?null:new x,B=new F(z(X.y-w.y,X.x-w.x));V||(g=-g),e-=2*K,W>0&&(D=o(e/W));var p=e/D;O&&O.add(1);for(var j=0;D>j;j++)O&&O.add(3),0===j?y.add({x:K+p*j,y:C?0:q}):y.add({x:K+p*j,y:q}),y.add({x:K+p*j+p/2,y:g+q}),T&&(g=-g);for(y.add({x:K+e,y:C?0:q}),j=0;j<y.size();j++){var P=B.tf(y.get(j));P.x+=w.x,P.y+=w.y,y.set(j,P)}return{points:y,segments:O}}),V("h.v",function(W,I,P){I=l(W,P);var e=new x,V=W.s(v),b=J(P,W),y=b.x,Y=b.y,F=$(P,W),S=F.x,h=F.y,c=W._40I instanceof D.Edge,w=W._41I instanceof D.Edge,T=0,g=0,z=S-y,E=h-Y;return V||(T=c?0:B(P,W._40I)/2,g=w?0:L(P,W._41I)/2),z>=0&&0>=E?(e.add({x:y+T,y:Y+I}),e.add({x:S+I,y:Y+I}),e.add({x:S+I,y:h+g})):0>=z&&E>=0?(e.add({x:y-T,y:Y+I}),e.add({x:S+I,y:Y+I}),e.add({x:S+I,y:h-g})):z>=0&&E>=0?(e.add({x:y+T,y:Y+I}),e.add({x:S-I,y:Y+I}),e.add({x:S-I,y:h-g})):(e.add({x:y-T,y:Y+I}),e.add({x:S-I,y:Y+I}),e.add({x:S-I,y:h+g})),n(e,W)}),V("v.h",function(o,i,C){i=l(o,C);var q=new x,r=o.s(v),m=J(C,o),G=m.x,Y=m.y,S=$(C,o),E=S.x,h=S.y,Q=o._40I instanceof D.Edge,y=o._41I instanceof D.Edge,d=0,z=0,F=E-G,U=h-Y;return r||(d=y?0:B(C,o._41I)/2,z=Q?0:L(C,o._40I)/2),F>=0&&0>=U?(q.add({x:G+i,y:Y-z}),q.add({x:G+i,y:h+i}),q.add({x:E-d,y:h+i})):0>=F&&U>=0?(q.add({x:G+i,y:Y+z}),q.add({x:G+i,y:h+i}),q.add({x:E+d,y:h+i})):F>=0&&U>=0?(q.add({x:G-i,y:Y+z}),q.add({x:G-i,y:h+i}),q.add({x:E-d,y:h+i})):(q.add({x:G-i,y:Y-z}),q.add({x:G-i,y:h+i}),q.add({x:E+d,y:h+i})),n(q,o)}),V("ortho",function(K,X,O){var d=new x,F=K.s(v),Z=K.s("edge.ortho"),q=K._40I,M=K._41I,m=J(O,K),V=m.x,c=m.y,i=$(O,K),R=i.x,u=i.y,r=R-V,e=u-c,o=q instanceof D.Edge,Q=M instanceof D.Edge,y=F||o?0:B(O,q)/2,A=F||o?0:L(O,q)/2,t=F||Q?0:B(O,M)/2,C=F||Q?0:L(O,M)/2,S=(r-(y+t)*(r>0?1:-1))*Z,G=(e-(A+C)*(e>0?1:-1))*Z;return I(r)<I(e)?r>=0&&0>=e?(d.add({x:V+X,y:c-A}),d.add({x:V+X,y:c+G+X-A}),d.add({x:R+X,y:c+G+X-A}),d.add({x:R+X,y:u+C})):0>=r&&e>=0?(d.add({x:V+X,y:c+A}),d.add({x:V+X,y:c+G+X+A}),d.add({x:R+X,y:c+G+X+A}),d.add({x:R+X,y:u-C})):r>=0&&e>=0?(d.add({x:V+X,y:c+A}),d.add({x:V+X,y:c+G-X+A}),d.add({x:R+X,y:c+G-X+A}),d.add({x:R+X,y:u-C})):(d.add({x:V+X,y:c-A}),d.add({x:V+X,y:c+G-X-A}),d.add({x:R+X,y:c+G-X-A}),d.add({x:R+X,y:u+C})):r>=0&&0>=e?(d.add({x:V+y,y:c+X}),d.add({x:V+S+X+y,y:c+X}),d.add({x:V+S+X+y,y:u+X}),d.add({x:R-t,y:u+X})):0>=r&&e>=0?(d.add({x:V-y,y:c+X}),d.add({x:V+S+X-y,y:c+X}),d.add({x:V+S+X-y,y:u+X}),d.add({x:R+t,y:u+X})):r>=0&&e>=0?(d.add({x:V+y,y:c+X}),d.add({x:V+S-X+y,y:c+X}),d.add({x:V+S-X+y,y:u+X}),d.add({x:R-t,y:u+X})):(d.add({x:V-y,y:c+X}),d.add({x:V+S-X-y,y:c+X}),d.add({x:V+S-X-y,y:u+X}),d.add({x:R+t,y:u+X})),n(d,K)}),V("flex",function(o,W,M){var C=new x,l=o.s("edge.flex")+S(o,M),c=o.s(v),K=o._40I,t=o._41I,P=J(M,o),r=P.x,b=P.y,X=$(M,o),i=X.x,d=X.y,Y=K instanceof D.Edge,G=t instanceof D.Edge,m=i-r,_=d-b,N=c||Y?0:B(M,K)/2,p=c||Y?0:L(M,K)/2,f=c||G?0:B(M,t)/2,T=c||G?0:L(M,t)/2,O=m>0?l:-l,q=_>0?l:-l;return I(m)<I(_)?m>=0&&0>=_?(C.add({x:r+W,y:b-p}),C.add({x:r+W,y:b+q+W-p}),C.add({x:i+W,y:d-q+W+T}),C.add({x:i+W,y:d+T})):0>=m&&_>=0?(C.add({x:r+W,y:b+p}),C.add({x:r+W,y:b+q+W+p}),C.add({x:i+W,y:d-q+W-T}),C.add({x:i+W,y:d-T})):m>=0&&_>=0?(C.add({x:r+W,y:b+p}),C.add({x:r+W,y:b+q-W+p}),C.add({x:i+W,y:d-q-W-T}),C.add({x:i+W,y:d-T})):(C.add({x:r+W,y:b-p}),C.add({x:r+W,y:b+q-W-p}),C.add({x:i+W,y:d-q-W+T}),C.add({x:i+W,y:d+T})):m>=0&&0>=_?(C.add({x:r+N,y:b+W}),C.add({x:r+O+W+N,y:b+W}),C.add({x:i-O+W-f,y:d+W}),C.add({x:i-f,y:d+W})):0>=m&&_>=0?(C.add({x:r-N,y:b+W}),C.add({x:r+O+W-N,y:b+W}),C.add({x:i-O+W+f,y:d+W}),C.add({x:i+f,y:d+W})):m>=0&&_>=0?(C.add({x:r+N,y:b+W}),C.add({x:r+O-W+N,y:b+W}),C.add({x:i-O-W-f,y:d+W}),C.add({x:i-f,y:d+W})):(C.add({x:r-N,y:b+W}),C.add({x:r+O-W-N,y:b+W}),C.add({x:i-O-W+f,y:d+W}),C.add({x:i+f,y:d+W})),n(C,o)}),V("extend.east",function(U,E,q){var j=new x,r=U.s(u)+S(U,q),X=U.s(v),L=J(q,U),P=U._40I instanceof D.Edge,c=U._41I instanceof D.Edge,V=L.x+(X||P?0:B(q,U._40I)/2),o=L.y,k=$(q,U),Z=k.x+(X||c?0:B(q,U._41I)/2),g=k.y,N=i(V,Z)+r;return o>g?(j.add({x:V,y:o+E}),j.add({x:N+E,y:o+E}),j.add({x:N+E,y:g-E}),j.add({x:Z,y:g-E})):(j.add({x:V,y:o-E}),j.add({x:N+E,y:o-E}),j.add({x:N+E,y:g+E}),j.add({x:Z,y:g+E})),n(j,U)}),V("extend.west",function(L,d,j){var I=new x,h=L.s(u)+S(L,j),O=L.s(v),y=L._40I instanceof D.Edge,i=L._41I instanceof D.Edge,c=J(j,L),N=c.x-(O||y?0:B(j,L._40I)/2),A=c.y,Q=$(j,L),r=Q.x-(O||i?0:B(j,L._41I)/2),X=Q.y,g=G(N,r)-h;return A>X?(I.add({x:N,y:A+d}),I.add({x:g-d,y:A+d}),I.add({x:g-d,y:X-d}),I.add({x:r,y:X-d})):(I.add({x:N,y:A-d}),I.add({x:g-d,y:A-d}),I.add({x:g-d,y:X+d}),I.add({x:r,y:X+d})),n(I,L)}),V("extend.north",function(z,X,t){var s=new x,c=z.s(u)+S(z,t),h=z.s(v),g=z._40I instanceof D.Edge,o=z._41I instanceof D.Edge,M=J(t,z),B=M.x,N=M.y-(h||g?0:L(t,z._40I)/2),_=$(t,z),j=_.x,T=_.y-(h||o?0:L(t,z._41I)/2),Z=G(N,T)-c;return B>j?(s.add({y:N,x:B+X}),s.add({y:Z-X,x:B+X}),s.add({y:Z-X,x:j-X}),s.add({y:T,x:j-X})):(s.add({y:N,x:B-X}),s.add({y:Z-X,x:B-X}),s.add({y:Z-X,x:j+X}),s.add({y:T,x:j+X})),n(s,z)}),V("extend.south",function(g,t,F){var N=new x,Q=g.s(u)+S(g,F),j=g.s(v),w=g._40I instanceof D.Edge,y=g._41I instanceof D.Edge,E=J(F,g),C=E.x,m=E.y+(j||w?0:L(F,g._40I)/2),R=$(F,g),Y=R.x,U=R.y+(j||y?0:L(F,g._41I)/2),l=i(m,U)+Q;return C>Y?(N.add({y:m,x:C+t}),N.add({y:l+t,x:C+t}),N.add({y:l+t,x:Y-t}),N.add({y:U,x:Y-t})):(N.add({y:m,x:C-t}),N.add({y:l+t,x:C-t}),N.add({y:l+t,x:Y+t}),N.add({y:U,x:Y+t})),n(N,g)});var M=function(M,b,X,B,l){if(B.sort(function(Q,R){var S=Q.getSourceAgent()===b?Q.getTargetAgent():Q.getSourceAgent(),W=R.getSourceAgent()===b?R.getTargetAgent():R.getSourceAgent(),x=S.p(),I=W.p();if(X===f||X===h){if(x.y>I.y)return 1;if(x.y<I.y)return-1}else{if(x.x>I.x)return 1;if(x.x<I.x)return-1}return e.sortFunc(Q.getId(),R.getId())}),l){for(var F,L,q,U=M.getSourceAgent(),z=M.getTargetAgent(),I=0;I<B.size();I++){var s=B.get(I);s.getSourceAgent()===U&&s.getTargetAgent()===z||s.getTargetAgent()===U&&s.getSourceAgent()===z?(L||(L=new x),L.add(s,0)):L?(q||(q=new x),q.add(s)):(F||(F=new x),F.add(s))}B.clear(),F&&B.addAll(F),L&&B.addAll(L),q&&B.addAll(q)}var R=B.indexOf(M),J=B.size(),g=M.s(c);return{side:X,index:R,size:J,offset:-g*(J-1)/2+g*R}},P=function(U,l,u,O,x){var i=l.s(w);return M(l,u,O,u.getAgentEdges().toList(function(o){return U.isVisible(o)&&o.s(w)===i}),x)},W=function(o,N){var G=o.getSourceAgent()===N?o.getTargetAgent():o.getSourceAgent(),O=N.p(),l=G.p(),B=l.x-O.x,J=l.y-O.y;return B>0&&I(J)<=B?h:0>B&&I(J)<=-B?f:J>0&&I(B)<=J?m:y},Y=function(g,d,f){var V=d.s(w),_=W(d,f);return M(d,f,_,f.getAgentEdges().toList(function(K){return g.isVisible(K)&&K.s(w)===V&&W(K,f)===_}))},p=function(l,X){var Q=l.getSourceAgent()===X,A=Q?l.getTargetAgent():l.getSourceAgent(),I=X.p(),O=A.p();return Q?I.y>O.y?y:m:I.x<O.x?h:f},q=function(g,o,a){var N=o.s(w),c=p(o,a);return M(o,a,c,a.getAgentEdges().toList(function(h){return g.isVisible(h)&&h.s(w)===N&&p(h,a)===c}),c===h||c===m)},K=function(r,V){var c=r.getSourceAgent()===V,a=c?r.getTargetAgent():r.getSourceAgent(),E=V.p(),t=a.p();return c?E.x<t.x?h:f:E.y>t.y?y:m},_=function(Q,i,j){var s=i.s(w),I=K(i,j);return M(i,j,I,j.getAgentEdges().toList(function(X){return Q.isVisible(X)&&X.s(w)===s&&K(X,j)===I}),I===h||I===m)},r=function(p,$,b){var k=p.getSourceAgent(),Q=p.getTargetAgent(),q=k.getId()>Q.getId(),R=q?Q:k,D=q?k:Q,T=R.p(),F=D.p(),S=b($,p,R),W=b($,p,D),J=p.s(v),X=J?0:B($,R)/2,P=J?0:B($,D)/2,e=J?0:L($,R)/2,C=J?0:L($,D)/2,l=S.offset,u=W.offset,G=S.side,r=W.side,z=new x;return G===y?(z.add({x:T.x+l,y:T.y-e}),z.add({x:T.x+l,y:F.y+u}),r===f?z.add({x:F.x-P,y:F.y+u}):z.add({x:F.x+P,y:F.y+u})):G===m?(z.add({x:T.x+l,y:T.y+e}),z.add({x:T.x+l,y:F.y+u}),r===f?z.add({x:F.x-P,y:F.y+u}):z.add({x:F.x+P,y:F.y+u})):G===f?(z.add({x:T.x-X,y:T.y+l}),z.add({x:F.x+u,y:T.y+l}),r===m?z.add({x:F.x+u,y:F.y+C}):z.add({x:F.x+u,y:F.y-C})):G===h&&(z.add({x:T.x+X,y:T.y+l}),z.add({x:F.x+u,y:T.y+l}),r===m?z.add({x:F.x+u,y:F.y+C}):z.add({x:F.x+u,y:F.y-C})),q&&z.reverse(),n(z,p)};V("ortho2",function(F,q,$){var Z,g,R=F.s(v),V=F.s("edge.ortho"),_=F.getSourceAgent(),s=F.getTargetAgent(),X=_.getId()>s.getId(),k=X?s:_,p=X?_:s,I=k.p(),P=p.p(),d=Y($,F,k),i=Y($,F,p),T=R?0:B($,k)/2,H=R?0:L($,k)/2,Q=R?0:B($,p)/2,u=R?0:L($,p)/2,l=new x,c=d.offset,w=i.offset,o=d.side;return o===h?(Z=P.y>I.y?-c:c,g=I.x+T+(P.x-Q-I.x-T)*V,l.add({x:I.x+T,y:I.y+c}),l.add({x:g+Z,y:I.y+c}),l.add({x:g+Z,y:P.y+w}),l.add({x:P.x-Q,y:P.y+w})):o===f?(Z=P.y>I.y?-c:c,g=I.x-T-(I.x-T-P.x-Q)*V,l.add({x:I.x-T,y:I.y+c}),l.add({x:g-Z,y:I.y+c}),l.add({x:g-Z,y:P.y+w}),l.add({x:P.x+Q,y:P.y+w})):o===m?(Z=P.x>I.x?-c:c,g=I.y+H+(P.y-u-I.y-H)*V,l.add({x:I.x+c,y:I.y+H}),l.add({x:I.x+c,y:g+Z}),l.add({x:P.x+w,y:g+Z}),l.add({x:P.x+w,y:P.y-u})):o===y&&(Z=P.x>I.x?-c:c,g=I.y-H-(I.y-H-P.y-u)*V,l.add({x:I.x+c,y:I.y-H}),l.add({x:I.x+c,y:g-Z}),l.add({x:P.x+w,y:g-Z}),l.add({x:P.x+w,y:P.y+u})),X&&l.reverse(),n(l,F)},!0),V("flex2",function(U,F,Z){var P,Q=U.getSourceAgent(),o=U.getTargetAgent(),q=Q.getId()>o.getId(),u=q?o:Q,G=q?Q:o,z=u.p(),$=G.p(),_=Y(Z,U,u),X=Y(Z,U,G),p=U.s(v),M=U.s("edge.flex")+(_.size-1)/2*U.s(c),H=p?0:B(Z,u)/2,t=p?0:L(Z,u)/2,e=p?0:B(Z,G)/2,K=p?0:L(Z,G)/2,A=new x,J=_.offset,I=X.offset,D=_.side;return D===h?(P=$.y>z.y?-J:J,A.add({x:z.x+H,y:z.y+J}),A.add({x:z.x+H+M+P,y:z.y+J}),A.add({x:$.x-e-M+P,y:$.y+I}),A.add({x:$.x-e,y:$.y+I})):D===f?(P=$.y>z.y?-J:J,A.add({x:z.x-H,y:z.y+J}),A.add({x:z.x-H-M-P,y:z.y+J}),A.add({x:$.x+e+M-P,y:$.y+I}),A.add({x:$.x+e,y:$.y+I})):D===m?(P=$.x>z.x?-J:J,A.add({x:z.x+J,y:z.y+t}),A.add({x:z.x+J,y:z.y+t+M+P}),A.add({x:$.x+I,y:$.y-K-M+P}),A.add({x:$.x+I,y:$.y-K})):D===y&&(P=$.x>z.x?-J:J,A.add({x:z.x+J,y:z.y-t}),A.add({x:z.x+J,y:z.y-t-M-P}),A.add({x:$.x+I,y:$.y+K+M-P}),A.add({x:$.x+I,y:$.y+K})),q&&A.reverse(),n(A,U)},!0),V("extend.north2",function(r,M,W){var D=r.getSourceAgent(),N=r.getTargetAgent(),o=D.getId()>N.getId(),$=o?N:D,z=o?D:N,j=$.p(),F=z.p(),E=P(W,r,$,y),g=P(W,r,z,y,!0),B=r.s(v),b=B?0:L(W,$)/2,d=B?0:L(W,z)/2,m=E.offset,J=g.offset,p=r.s(u)+(E.size-1)/2*r.s(c),O=G(j.y-b,F.y-d)-p+(j.x<F.x?m:-m),H=new x;return H.add({x:j.x+m,y:j.y-b}),H.add({x:j.x+m,y:O}),H.add({x:F.x+J,y:O}),H.add({x:F.x+J,y:F.y-d}),o&&H.reverse(),n(H,r)},!0),V("extend.south2",function(T,h,t){var U=T.getSourceAgent(),k=T.getTargetAgent(),I=U.getId()>k.getId(),Q=I?k:U,C=I?U:k,z=Q.p(),p=C.p(),K=P(t,T,Q,m),V=P(t,T,C,m,!0),E=T.s(v),b=E?0:L(t,Q)/2,$=E?0:L(t,C)/2,d=K.offset,O=V.offset,H=T.s(u)+(K.size-1)/2*T.s(c),w=i(z.y+b,p.y+$)+H+(z.x>p.x?d:-d),A=new x;return A.add({x:z.x+d,y:z.y+b}),A.add({x:z.x+d,y:w}),A.add({x:p.x+O,y:w}),A.add({x:p.x+O,y:p.y+$}),I&&A.reverse(),n(A,T)},!0),V("extend.west2",function(J,m,S){var R=J.getSourceAgent(),K=J.getTargetAgent(),l=R.getId()>K.getId(),f=l?K:R,r=l?R:K,p=f.p(),E=r.p(),Y=P(S,J,f,y),t=P(S,J,r,y,!0),s=J.s(v),U=s?0:B(S,f)/2,o=s?0:B(S,r)/2,w=Y.offset,O=t.offset,q=J.s(u)+(Y.size-1)/2*J.s(c),M=G(p.x-U,E.x-o)-q+(p.y<E.y?w:-w),d=new x;return d.add({x:p.x-U,y:p.y+w}),d.add({x:M,y:p.y+w}),d.add({x:M,y:E.y+O}),d.add({x:E.x-o,y:E.y+O}),l&&d.reverse(),n(d,J)},!0),V("extend.east2",function(e,S,m){var J=e.getSourceAgent(),C=e.getTargetAgent(),d=J.getId()>C.getId(),r=d?C:J,b=d?J:C,V=r.p(),k=b.p(),q=P(m,e,r,y),$=P(m,e,b,y,!0),o=e.s(v),a=o?0:B(m,r)/2,Q=o?0:B(m,b)/2,E=q.offset,G=$.offset,I=e.s(u)+(q.size-1)/2*e.s(c),h=i(V.x+a,k.x+Q)+I+(V.y>k.y?E:-E),w=new x;return w.add({x:V.x+a,y:V.y+E}),w.add({x:h,y:V.y+E}),w.add({x:h,y:k.y+G}),w.add({x:k.x+Q,y:k.y+G}),d&&w.reverse(),n(w,e)},!0),V("v.h2",function(g,I,Z){return r(g,Z,q)},!0),V("h.v2",function(Q,Z,n){return r(Q,n,_)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);