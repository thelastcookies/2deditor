!function(L,U,Y){"use strict";var v="ht",f=L[v],e=null,c=Math,$=c.abs,u=c.max,A=Number.MAX_VALUE,p=f.Default,o=p.getInternal(),K=p.clone,F=o.vec3TransformMat4,s=[0,0],E=o.appendArray,S=function(){function W(G,_,b,d){if(G){var Z=G[d];if(Z){b.ignoreColor||(_.color=Z.kd),!b.ignoreTransparent&&Z.d>0&&Z.d<1&&(_.transparent=!0,_.opacity=Z.d);var j;if(!b.ignoreImage&&(j=Z.map_kd)){j=j.split(" ");for(var U=-1,J=0;J<j.length;J++)"-o"===j[J]?(_.uvOffset=[parseFloat(j[J+1]),parseFloat(j[J+2])],J+=3,U=J):"-s"===j[J]&&(_.uvScale=[parseFloat(j[J+1]),parseFloat(j[J+2])],J+=3,U=J);_.image=(b.prefix||"")+j.splice(U+1).join(" ")}}}}var l=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,V=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,z=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,M=/^[og]\s*(.+)?/,k=function(e,q){return q=parseInt(q),q>=0?e[q-1]:e[q+e.length]},x=function(o,J,s,G,R){if(o.lvs){var N=k(J,G),p=k(J,R),W=s.matrix,l=o.lvs;W?(E(l,F(K(N),W)),E(l,F(K(p),W))):(E(l,N),E(l,p))}},y=function(C,U,x,I,L,h){if(C.vs){var D=k(U,I),i=k(U,L),Q=k(U,h),m=x.matrix,j=C.vs;if(x.flipFace){var _=i;i=Q,Q=_}m?(E(j,F(K(D),m)),E(j,F(K(i),m)),E(j,F(K(Q),m))):(E(j,D),E(j,i),E(j,Q))}},U=function(l,U,O,e,C,V){if(l.vs){var G=O.flipY,P=e===Y?s:k(U,e),f=C===Y?s:k(U,C),p=V===Y?s:k(U,V);if(O.flipFace){var c=f;f=p,p=c}l.uv.push(P[0],G?1-P[1]:P[1],f[0],G?1-f[1]:f[1],p[0],G?1-p[1]:p[1])}},m=function(w,B,A,T,b,i){if(w.vs){var z=k(B,T),c=k(B,b),M=k(B,i),H=A.normalMatrix,p=w.ns;if(A.flipFace){var e=c;c=M,M=e}H?(E(p,F(K(z),H)),E(p,F(K(c),H)),E(p,F(K(M),H))):(E(p,z),E(p,c),E(p,M))}},q=function(i,Y,O,v){for(var T=v.length-1,N=0;T>N;++N)x(i,Y,O,v[N],v[N+1]);x(i,Y,O,v[T],v[0])},a=function(t,R,C,l,d,f,V,w){var i=l&&l.length&&w;f[3]===Y?(y(t,R,d,f[0],f[1],f[2]),V?U(t,C,d,V[0],V[1],V[2]):t.uv&&t.uv.length&&U(t,C,d),i&&m(t,l,d,w[0],w[1],w[2])):(y(t,R,d,f[0],f[1],f[3]),y(t,R,d,f[1],f[2],f[3]),V?(U(t,C,d,V[0],V[1],V[3]),U(t,C,d,V[1],V[2],V[3])):t.uv&&t.uv.length&&(U(t,C,d),U(t,C,d)),i&&(m(t,l,d,w[0],w[1],w[3]),m(t,l,d,w[1],w[2],w[3])))},R=function(F,V,v,B){var L,X,D,U,m,x,z,w,T=A,a=A,t=A,Q=-A,P=-A,S=-A;for(L in F)for(x=F[L].vs,w=x.length,X=0;w>X;X+=3)D=x[X+0],U=x[X+1],m=x[X+2],T>D&&(T=D),a>U&&(a=U),t>m&&(t=m),D>Q&&(Q=D),U>P&&(P=U),m>S&&(S=m);if(v){var H=T+(Q-T)/2,O=a+(P-a)/2,Z=t+(S-t)/2;for(L in F){for(x=F[L].vs,w=x.length,X=0;w>X;X+=3)x[X+0]-=H,x[X+1]-=O,x[X+2]-=Z;if(z=F[L].lvs)for(w=z.length,X=0;w>X;X+=3)z[X+0]-=H,z[X+1]-=O,z[X+2]-=Z}}var o,K,W;v?(o=Q-T,K=P-a,W=S-t):(o=2*u($(T),$(Q)),K=2*u($(a),$(P)),W=2*u($(t),$(S))),0===o&&(o=Math.min(K,W)/1e3||.001),0===K&&(K=Math.min(o,W)/1e3||.001),0===W&&(W=Math.min(o,K)/1e3||.001),B.rawS3=[o,K,W];for(L in F){if(x=F[L].vs,z=F[L].lvs,V){for(w=x.length,X=0;w>X;X+=3)o&&(x[X+0]/=o),K&&(x[X+1]/=K),W&&(x[X+2]/=W);if(z)for(w=z.length,X=0;w>X;X+=3)o&&(z[X+0]/=o),K&&(z[X+1]/=K),W&&(z[X+2]/=W);var l=F[L].ns;if(l){w=l.length;var p=new f.Math.Vector3;for(X=0;w>X;X+=3)p.set(l[X+0]*o,l[X+1]*K,l[X+2]*W).normalize(),l[X+0]=p.x,l[X+1]=p.y,l[X+2]=p.z}}F[L].rawS3=B.rawS3}};return function(G,A,h){if(!G)return e;(o.isString(A)||A instanceof ArrayBuffer)&&(A=D(A)),h||(h={}),h.flipY==e&&(h.flipY=!0),(h.s3||h.r3||h.t3||h.mat)&&(h.matrix=o.createWorldMatrix(h.mat,h.s3,h.r3,h.rotationMode,h.t3));var m,Q,Z,n,J,B=f.Style["wf.loadQuadWireframe"],g=[],y=[],N=h.ignoreNormal?e:[],x=h.reverseFlipMtls,i={vs:[],uv:[],ns:N?[]:e},s={htdefault:i},L=new H(G),I={},C="";for(N&&h.matrix&&(h.normalMatrix=o.createNormalMatrix(h.matrix));null!=(Q=L.stepNext());)if(Q=Q.trim(),0!==Q.length&&"#"!==Q.charAt(0))if(Q.indexOf("\\")!==Q.length-1)if(C&&(Q=C+Q,C=""),Q.indexOf("#QNAN0")>=0&&(Q=Q.replace(/#QNAN0/gi,"0")),Z=l.exec(Q))g.push([parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3])]);else if(Z=V.exec(Q))y.push([parseFloat(Z[1]),parseFloat(Z[2])]);else if(N&&(Z=z.exec(Q)))h.flipFace?N.push([parseFloat(-Z[1]),parseFloat(-Z[2]),parseFloat(-Z[3])]):N.push([parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3])]);else if("f"===Q[0]){var j=Q.split(/\s+/);if(j.length<4)continue;var P,m,k,t=[],u=[],K=[];for(m=1,k=j.length;k>m;m++)P=j[m].split("/"),t.push(parseInt(P[0],10)),P.length>1&&P[1].length>0&&K.push(parseInt(P[1],10)),P.length>2&&P[2].length>0&&u.push(parseInt(P[2],10));for(m=0,k=t.length-2;k>m;m++)a(i,g,y,N,h,[t[0],t[m+1],t[m+2]],K.length?[K[0],K[m+1],K[m+2]]:e,u.length?[u[0],u[m+1],u[m+2]]:e);B&&q(i,g,h,t)}else if(h.part&&null!==(Z=M.exec(Q))){i.vs&&0!==i.vs.length||(delete s[i.name],I[i.name]--);var n=(" "+Z[0].substr(1).trim()).substr(1),E=I[n]||0;I[n]=E+1,J=n+(E?E:""),i=s[J]={name:J,vs:[],uv:[],ns:N?[]:e,lvs:B?[]:e}}else/^usemtl /.test(Q)&&(n=Q.substring(7).trim(),h.part?W(A,i,h,n):(i=s[n])||(i=s[n]={name:n,vs:[],uv:[],ns:N?[]:e,lvs:B?[]:e},h.ignoreMtls&&h.ignoreMtls.indexOf(n)>=0&&delete i.vs,(h.reverseFlip||"*"===x||x&&x.indexOf(n)>=0)&&(i.reverseFlip=!0),W(A,i,h,n)));else C+=Q.substring(0,Q.length-1);var U=[];for(var X in s){var O=s[X].vs;if(O&&0!==O.length){var T=s[X].uv;if(T)for(var $=2*O.length/3-T.length;$-->0;)T.push(0)}else U.push(X)}U.forEach(function(K){delete s[K]}),R(s,h.cube,h.center,h);var w=h.shape3d;if(w){var Y=[];for(var n in s){var i=s[n];Y.rawS3=i.rawS3,Y.push(i)}p.setShape3dModel(w,Y)}return s}}(),D=function(F){var l={};if(F)for(var S,P,k,j,w,q,f=new H(F),E=/\s+/;null!=(P=f.stepNext());)P=P.trim(),0!==P.length&&"#"!==P.charAt(0)&&(k=P.indexOf(" "),j=(k?P.substring(0,k):P).toLowerCase(),w=(k?P.substring(k+1):"").trim(),"newmtl"===j?l[w]=S={name:w}:S&&("ka"===j||"kd"===j||"ks"===j?(q=w.split(E,3),S[j]=[parseFloat(q[0]),parseFloat(q[1]),parseFloat(q[2]),1]):S[j]="ns"===j||"d"===j?parseFloat(w):w));return l},H=function(F){var z=this;if(F instanceof ArrayBuffer){z.isBuffer=!0;var q=0,B=new Uint8Array(F),N=B.length,$=B.length;z.stepNext=function(){for(var I,C,m=q;N>q;)if(I=B[q],C=I>>4,12===C||13==C)q+=2;else if(14===C)q+=3;else if(q++,10===I)return String.fromCharCode.apply(null,B.subarray(m,q));return q>m?String.fromCharCode.apply(null,B.subarray(m,q)):null}}else{z.isBuffer=!1;var Z=F.split("\n"),Q=0,$=Z.length;z.stepNext=function(){return $>Q?Z[Q++]:null}}};H.prototype={},H.prototype.constructor=H,o.addMethod(p,{loadObj:function(m,_,P){P=P||{};var K=!1;/(MSIE |Trident\/|Edge\/)/.test(L.navigator.userAgent)&&(K=!0);var T=function(J){var V,s=P.finishFunc,l=P.shape3d,B=J?S(J[0],J[1],P):null;if(B){if(l)V=p.getShape3dModel(l);else{V=[];for(var y in B){var Y=B[y];V.rawS3=Y.rawS3,V.push(Y)}}s&&s(B,V,V.rawS3)}else s&&s(null)};if(K){var r=function(F){P.responseType="arraybuffer",p.xhrLoad(m,function(y){T([y,F])},P)};_?p.xhrLoad(_,function(c){r(c)},P):r()}else p.xhrLoad(_?[m,_]:[m],T,P)},parseObj:function(X,I,e){return S(X,I,e)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);